# ğŸ¥ Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ£Ù…ÙŠÙ†Ø§Øª Ø§Ù„ØµØ­ÙŠØ© - ØªÙ‚Ø±ÙŠØ± Ø´Ø§Ù…Ù„ ÙˆÙ…ÙØµÙ„
## Comprehensive Insurance System Report

**ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯**: 2025-01-17  
**Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©**: 40% (Ø¶Ø¹ÙŠÙ Ø¬Ø¯Ø§Ù‹)  
**Ø§Ù„Ù‡Ø¯Ù**: 95% (Ù†Ø¸Ø§Ù… Ù…ØªÙƒØ§Ù…Ù„ ÙˆÙ…Ø¤ØªÙ…Øª Ø¨Ø§Ù„ÙƒØ§Ù…Ù„)

---

## ğŸ“Š Ø§Ù„Ù…Ù„Ø®Øµ Ø§Ù„ØªÙ†ÙÙŠØ°ÙŠ

### Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø­Ø§Ù„ÙŠ:
- âŒ Ø¬Ø¯ÙˆÙ„ ÙˆØ§Ø­Ø¯ ÙÙ‚Ø· (`insurance_claims`) - **ÙØ§Ø±Øº ØªÙ…Ø§Ù…Ø§Ù‹**
- âŒ APIs ØªØ­Ø§ÙƒÙŠ ÙÙ‚Ø· - **Ù„Ø§ ØªØ±Ø³Ù„ Ø·Ù„Ø¨Ø§Øª Ø­Ù‚ÙŠÙ‚ÙŠØ©**
- âŒ Ù„Ø§ ÙŠÙˆØ¬Ø¯ ØªÙƒØ§Ù…Ù„ Ù…Ø¹ Ø£ÙŠ Ø´Ø±ÙƒØ© ØªØ£Ù…ÙŠÙ†
- âŒ Ù„Ø§ ÙŠÙˆØ¬Ø¯ workflow Ù„Ù„Ù…Ø·Ø§Ù„Ø¨Ø§Øª
- âŒ Ù„Ø§ ÙŠÙˆØ¬Ø¯ UI Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†

### Ø§Ù„Ø±Ø¤ÙŠØ© Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„ÙŠØ©:
- âœ… ØªÙƒØ§Ù…Ù„ Ù…Ø¹ **10 Ø´Ø±ÙƒØ§Øª ØªØ£Ù…ÙŠÙ† Ø³Ø¹ÙˆØ¯ÙŠØ©** Ø±Ø¦ÙŠØ³ÙŠØ©
- âœ… Ù†Ø¸Ø§Ù… Ù…ÙˆØ­Ø¯ Ù‚Ø§Ø¨Ù„ Ù„Ù„ØªÙˆØ³Ø¹ Ù„Ø¥Ø¶Ø§ÙØ© Ø´Ø±ÙƒØ§Øª Ø¬Ø¯ÙŠØ¯Ø©
- âœ… **Ø£ØªÙ…ØªØ© ÙƒØ§Ù…Ù„Ø©** Ù„Ø¯ÙˆØ±Ø© Ø§Ù„Ù…Ø·Ø§Ù„Ø¨Ø§Øª
- âœ… ØªØ¬Ø±Ø¨Ø© Ù…Ø³ØªØ®Ø¯Ù… Ø³Ù„Ø³Ø© ÙˆØ³Ù‡Ù„Ø©
- âœ… ØªÙ…ÙŠØ² Ø¹Ù† Ø§Ù„Ù…Ù†Ø§ÙØ³ÙŠÙ† Ø¨Ø§Ù„Ø³Ø±Ø¹Ø© ÙˆØ§Ù„Ø£ØªÙ…ØªØ©

---

## ğŸ‡¸ğŸ‡¦ Ø£Ø´Ù‡Ø± 10 Ø´Ø±ÙƒØ§Øª ØªØ£Ù…ÙŠÙ† ÙÙŠ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©

### 1. **Ø§Ù„ØªØ¹Ø§ÙˆÙ†ÙŠØ© (Tawuniya)** ğŸ¥‡
**Ø§Ù„Ø­ØµØ© Ø§Ù„Ø³ÙˆÙ‚ÙŠØ©**: ~20%  
**Ø§Ù„ØªØ®ØµØµ**: ØªØ£Ù…ÙŠÙ† ØµØ­ÙŠ Ø´Ø§Ù…Ù„

**Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØªÙƒØ§Ù…Ù„:**
```json
{
  "name": "Tawuniya",
  "api_version": "v2",
  "base_url": "https://api.tawuniya.com.sa/v2",
  "auth_type": "OAuth 2.0",
  "endpoints": {
    "submit_claim": "/claims/submit",
    "check_eligibility": "/eligibility/check",
    "get_claim_status": "/claims/{claim_id}/status",
    "get_coverage": "/policies/{policy_id}/coverage",
    "pre_authorization": "/pre-auth/request"
  },
  "supported_formats": ["HL7 FHIR", "JSON", "XML"],
  "response_time": "2-5 Ø¯Ù‚Ø§Ø¦Ù‚ (Ù…ØªÙˆØ³Ø·)",
  "approval_types": ["instant", "manual_review", "pending"]
}
```

**Ù…ØªØ·Ù„Ø¨Ø§Øª Ø§Ù„ØªÙƒØ§Ù…Ù„:**
- âœ… Ø±Ø®ØµØ© Ù…Ù†Ø´Ø£Ø© ØµØ­ÙŠØ© Ù…Ù† ÙˆØ²Ø§Ø±Ø© Ø§Ù„ØµØ­Ø©
- âœ… Ø¹Ù‚Ø¯ Ù…Ø¹ Ø§Ù„ØªØ¹Ø§ÙˆÙ†ÙŠØ©
- âœ… API Credentials (Client ID + Secret)
- âœ… Webhook URL Ù„Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
- âœ… Ø´Ù‡Ø§Ø¯Ø© SSL

---

### 2. **Ø¨ÙˆØ¨Ø§ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© (Bupa Arabia)** ğŸ¥ˆ
**Ø§Ù„Ø­ØµØ© Ø§Ù„Ø³ÙˆÙ‚ÙŠØ©**: ~18%  
**Ø§Ù„ØªØ®ØµØµ**: ØªØ£Ù…ÙŠÙ† ØµØ­ÙŠ ÙØ§Ø®Ø±

**Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØªÙƒØ§Ù…Ù„:**
```json
{
  "name": "Bupa Arabia",
  "api_version": "v3",
  "base_url": "https://api.bupa.com.sa/v3",
  "auth_type": "API Key + JWT",
  "endpoints": {
    "submit_claim": "/claims/new",
    "eligibility": "/member/eligibility",
    "claim_status": "/claims/status",
    "benefits": "/member/benefits",
    "pre_auth": "/authorization/request"
  },
  "supported_formats": ["JSON", "HL7 FHIR"],
  "response_time": "1-3 Ø¯Ù‚Ø§Ø¦Ù‚ (Ø³Ø±ÙŠØ¹)",
  "approval_types": ["auto_approved", "requires_review", "rejected"]
}
```

---

### 3. **Ø§Ù„ØªØ£Ù…ÙŠÙ† Ø§Ù„Ø·Ø¨ÙŠ Ø§Ù„Ø¯ÙˆÙ„ÙŠ (Medgulf)** ğŸ¥‰
**Ø§Ù„Ø­ØµØ© Ø§Ù„Ø³ÙˆÙ‚ÙŠØ©**: ~12%

**Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØªÙƒØ§Ù…Ù„:**
```json
{
  "name": "Medgulf",
  "api_version": "v1",
  "base_url": "https://api.medgulf.com.sa/v1",
  "auth_type": "Basic Auth + API Key",
  "endpoints": {
    "claim_submission": "/claim/submit",
    "member_verification": "/member/verify",
    "claim_inquiry": "/claim/inquiry",
    "coverage_check": "/coverage/check"
  },
  "supported_formats": ["JSON", "XML"],
  "response_time": "5-10 Ø¯Ù‚Ø§Ø¦Ù‚",
  "approval_types": ["approved", "pending", "denied"]
}
```

---

### 4. **Ù…Ù„Ø§Ø° Ù„Ù„ØªØ£Ù…ÙŠÙ† (Malath Insurance)**
**Ø§Ù„Ø­ØµØ© Ø§Ù„Ø³ÙˆÙ‚ÙŠØ©**: ~8%

```json
{
  "name": "Malath",
  "api_version": "v2",
  "base_url": "https://api.malath.com.sa/v2",
  "auth_type": "OAuth 2.0",
  "endpoints": {
    "submit": "/claims/submit",
    "status": "/claims/{id}",
    "eligibility": "/eligibility"
  },
  "response_time": "3-7 Ø¯Ù‚Ø§Ø¦Ù‚"
}
```

---

### 5. **Ø³Ù„Ø§Ù…Ø© Ù„Ù„ØªØ£Ù…ÙŠÙ† (Salama Insurance)**
**Ø§Ù„Ø­ØµØ© Ø§Ù„Ø³ÙˆÙ‚ÙŠØ©**: ~7%

```json
{
  "name": "Salama",
  "api_version": "v1",
  "base_url": "https://api.salama.com.sa/v1",
  "auth_type": "API Key",
  "endpoints": {
    "claim": "/claim/new",
    "status": "/claim/status",
    "member": "/member/info"
  },
  "response_time": "4-8 Ø¯Ù‚Ø§Ø¦Ù‚"
}
```

---

### 6. **Ø§Ù„Ø±Ø§Ø¬Ø­ÙŠ ØªÙƒØ§ÙÙ„ (Al Rajhi Takaful)**
**Ø§Ù„Ø­ØµØ© Ø§Ù„Ø³ÙˆÙ‚ÙŠØ©**: ~6%

```json
{
  "name": "Al Rajhi Takaful",
  "api_version": "v2",
  "base_url": "https://api.alrajhitakaful.com.sa/v2",
  "auth_type": "OAuth 2.0 + mTLS",
  "endpoints": {
    "claim_submit": "/takaful/claim",
    "member_check": "/member/verify",
    "status": "/claim/track"
  },
  "response_time": "2-5 Ø¯Ù‚Ø§Ø¦Ù‚"
}
```

---

### 7. **Ø§Ù„Ø£Ù‡Ù„ÙŠ Ù„Ù„ØªØ£Ù…ÙŠÙ† (Al Ahli Insurance)**
**Ø§Ù„Ø­ØµØ© Ø§Ù„Ø³ÙˆÙ‚ÙŠØ©**: ~5%

```json
{
  "name": "Al Ahli",
  "api_version": "v1",
  "base_url": "https://api.alahli-ins.com.sa/v1",
  "auth_type": "API Key + HMAC",
  "endpoints": {
    "new_claim": "/claims/create",
    "get_status": "/claims/status",
    "eligibility": "/member/eligible"
  },
  "response_time": "3-6 Ø¯Ù‚Ø§Ø¦Ù‚"
}
```

---

### 8. **Ø³Ø§Ø¨ ØªÙƒØ§ÙÙ„ (SABB Takaful)**
**Ø§Ù„Ø­ØµØ© Ø§Ù„Ø³ÙˆÙ‚ÙŠØ©**: ~4%

```json
{
  "name": "SABB Takaful",
  "api_version": "v1",
  "base_url": "https://api.sabbtakaful.com/v1",
  "auth_type": "OAuth 2.0",
  "endpoints": {
    "submit_claim": "/claim/submit",
    "check_member": "/member/check",
    "claim_status": "/claim/{id}"
  },
  "response_time": "4-7 Ø¯Ù‚Ø§Ø¦Ù‚"
}
```

---

### 9. **Ø§Ù„Ø§ØªØ­Ø§Ø¯ Ø§Ù„ØªØ¬Ø§Ø±ÙŠ (Union Commercial)**
**Ø§Ù„Ø­ØµØ© Ø§Ù„Ø³ÙˆÙ‚ÙŠØ©**: ~3%

```json
{
  "name": "Union Commercial",
  "api_version": "v2",
  "base_url": "https://api.unioncommercial.com.sa/v2",
  "auth_type": "API Key",
  "endpoints": {
    "claim": "/claims/new",
    "status": "/claims/status",
    "coverage": "/coverage/check"
  },
  "response_time": "5-9 Ø¯Ù‚Ø§Ø¦Ù‚"
}
```

---

### 10. **ÙˆÙ„Ø§Ø¡ Ù„Ù„ØªØ£Ù…ÙŠÙ† (Walaa Insurance)**
**Ø§Ù„Ø­ØµØ© Ø§Ù„Ø³ÙˆÙ‚ÙŠØ©**: ~3%

```json
{
  "name": "Walaa",
  "api_version": "v1",
  "base_url": "https://api.walaa.com/v1",
  "auth_type": "Basic Auth",
  "endpoints": {
    "submit": "/claim/submit",
    "inquiry": "/claim/inquiry",
    "member": "/member/details"
  },
  "response_time": "6-10 Ø¯Ù‚Ø§Ø¦Ù‚"
}
```

---

## ğŸ—ï¸ Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ÙˆØ­Ø¯ Ù„Ù„ØªÙƒØ§Ù…Ù„ (Universal Integration System)

### Ø§Ù„ÙÙ„Ø³ÙØ©:
**"Ù†Ø¸Ø§Ù… ÙˆØ§Ø­Ø¯ØŒ ØªÙƒØ§Ù…Ù„Ø§Øª Ù…ØªØ¹Ø¯Ø¯Ø©"**

Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† ÙƒØªØ§Ø¨Ø© ÙƒÙˆØ¯ Ù…Ù†ÙØµÙ„ Ù„ÙƒÙ„ Ø´Ø±ÙƒØ©ØŒ Ù†Ø¨Ù†ÙŠ Ù†Ø¸Ø§Ù… Ù…ÙˆØ­Ø¯ ÙŠØ¯Ø¹Ù…:
- âœ… Ø¥Ø¶Ø§ÙØ© Ø´Ø±ÙƒØ§Øª Ø¬Ø¯ÙŠØ¯Ø© **Ø¨Ø¯ÙˆÙ† ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„ÙƒÙˆØ¯**
- âœ… Configuration-driven approach
- âœ… Plugin architecture
- âœ… Adapter pattern

---

### Ø§Ù„Ø¨Ù†ÙŠØ© Ø§Ù„Ù…Ø¹Ù…Ø§Ø±ÙŠØ©:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Insurance Manager                         â”‚
â”‚                  (Unified Interface)                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚              â”‚               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Adapter    â”‚ â”‚ Adapter  â”‚ â”‚   Adapter    â”‚
â”‚  Tawuniya    â”‚ â”‚   Bupa   â”‚ â”‚   Medgulf    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚              â”‚               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Insurance Provider APIs               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“‹ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­Ø³Ù‘Ù†Ø©

### Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©:

#### 1. `insurance_providers` - Ù…Ø²ÙˆØ¯ÙŠ Ø§Ù„ØªØ£Ù…ÙŠÙ†
```sql
CREATE TABLE insurance_providers (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  public_id VARCHAR(255) UNIQUE NOT NULL,
  
  -- Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø£Ø³Ø§Ø³ÙŠØ©
  name VARCHAR(255) NOT NULL,
  name_ar VARCHAR(255) NOT NULL,
  code VARCHAR(50) UNIQUE NOT NULL, -- 'tawuniya', 'bupa', etc.
  logo_url TEXT,
  
  -- Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØªÙƒØ§Ù…Ù„
  api_version VARCHAR(20),
  base_url TEXT NOT NULL,
  auth_type VARCHAR(50), -- 'oauth2', 'api_key', 'basic', etc.
  
  -- Credentials (encrypted)
  credentials JSONB NOT NULL DEFAULT '{}',
  
  -- Endpoints configuration
  endpoints JSONB NOT NULL DEFAULT '{}',
  
  -- Settings
  is_active BOOLEAN DEFAULT true,
  is_test_mode BOOLEAN DEFAULT false,
  supported_formats JSONB DEFAULT '["json"]',
  
  -- Performance metrics
  avg_response_time_ms INTEGER,
  success_rate DECIMAL(5,2),
  last_health_check TIMESTAMPTZ,
  health_status VARCHAR(20) DEFAULT 'unknown',
  
  -- Metadata
  metadata JSONB DEFAULT '{}',
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);

CREATE INDEX idx_insurance_providers_code ON insurance_providers(code);
CREATE INDEX idx_insurance_providers_active ON insurance_providers(is_active);
```

---

#### 2. `insurance_policies` - Ø¨ÙˆØ§Ù„Øµ Ø§Ù„ØªØ£Ù…ÙŠÙ†
```sql
CREATE TABLE insurance_policies (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  public_id VARCHAR(255) UNIQUE NOT NULL,
  
  -- Ø±Ø¨Ø·
  patient_id UUID REFERENCES patients(id) ON DELETE CASCADE,
  provider_id UUID REFERENCES insurance_providers(id),
  
  -- Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¨ÙˆÙ„ÙŠØµØ©
  policy_number VARCHAR(255) NOT NULL,
  member_id VARCHAR(255) NOT NULL,
  
  -- ØªÙØ§ØµÙŠÙ„ Ø§Ù„ØªØºØ·ÙŠØ©
  coverage_type VARCHAR(50), -- 'basic', 'premium', 'vip'
  coverage_start_date DATE NOT NULL,
  coverage_end_date DATE NOT NULL,
  
  -- Ø§Ù„Ø­Ø¯ÙˆØ¯ Ø§Ù„Ù…Ø§Ù„ÙŠØ©
  annual_limit DECIMAL(12,2),
  remaining_limit DECIMAL(12,2),
  deductible DECIMAL(10,2) DEFAULT 0,
  copay_percentage DECIMAL(5,2) DEFAULT 0,
  
  -- Ø§Ù„ØªØºØ·ÙŠØ§Øª
  covered_services JSONB DEFAULT '[]',
  excluded_services JSONB DEFAULT '[]',
  
  -- Ø§Ù„Ø­Ø§Ù„Ø©
  status VARCHAR(20) DEFAULT 'active', -- 'active', 'expired', 'suspended'
  
  -- Metadata
  metadata JSONB DEFAULT '{}',
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW(),
  
  UNIQUE(provider_id, policy_number, member_id)
);

CREATE INDEX idx_insurance_policies_patient ON insurance_policies(patient_id);
CREATE INDEX idx_insurance_policies_provider ON insurance_policies(provider_id);
CREATE INDEX idx_insurance_policies_status ON insurance_policies(status);
CREATE INDEX idx_insurance_policies_dates ON insurance_policies(coverage_start_date, coverage_end_date);
```

---

#### 3. `insurance_claims` - Ø§Ù„Ù…Ø·Ø§Ù„Ø¨Ø§Øª (Ù…Ø­Ø³Ù‘Ù†)
```sql
CREATE TABLE insurance_claims (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  public_id VARCHAR(255) UNIQUE NOT NULL,
  
  -- Ø±Ø¨Ø·
  patient_id UUID REFERENCES patients(id),
  policy_id UUID REFERENCES insurance_policies(id),
  provider_id UUID REFERENCES insurance_providers(id),
  appointment_id UUID REFERENCES appointments(id),
  
  -- Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø·Ø§Ù„Ø¨Ø©
  claim_number VARCHAR(255) UNIQUE,
  external_claim_id VARCHAR(255), -- Ù…Ù† Ø´Ø±ÙƒØ© Ø§Ù„ØªØ£Ù…ÙŠÙ†
  
  -- Ø§Ù„ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø·Ø¨ÙŠØ©
  diagnosis_code VARCHAR(50), -- ICD-10
  diagnosis_description TEXT,
  procedure_codes JSONB DEFAULT '[]', -- CPT codes
  
  -- Ø§Ù„Ù…Ø¨Ø§Ù„Øº
  claimed_amount DECIMAL(12,2) NOT NULL,
  approved_amount DECIMAL(12,2),
  patient_share DECIMAL(12,2),
  insurance_share DECIMAL(12,2),
  
  -- Ø§Ù„Ø­Ø§Ù„Ø© ÙˆØ§Ù„ØªØªØ¨Ø¹
  status VARCHAR(30) DEFAULT 'draft',
  -- 'draft', 'submitted', 'pending', 'under_review', 
  -- 'approved', 'partially_approved', 'rejected', 'paid'
  
  submission_date TIMESTAMPTZ,
  approval_date TIMESTAMPTZ,
  payment_date TIMESTAMPTZ,
  
  -- Ø§Ù„Ø±Ø¯ Ù…Ù† Ø´Ø±ÙƒØ© Ø§Ù„ØªØ£Ù…ÙŠÙ†
  provider_response JSONB,
  rejection_reason TEXT,
  approval_code VARCHAR(255),
  
  -- Ø§Ù„Ù…Ø±ÙÙ‚Ø§Øª
  attachments JSONB DEFAULT '[]',
  
  -- Ø§Ù„ØªØªØ¨Ø¹
  submitted_by UUID REFERENCES users(id),
  reviewed_by UUID REFERENCES users(id),
  
  -- Metadata
  metadata JSONB DEFAULT '{}',
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);

CREATE INDEX idx_insurance_claims_patient ON insurance_claims(patient_id);
CREATE INDEX idx_insurance_claims_policy ON insurance_claims(policy_id);
CREATE INDEX idx_insurance_claims_provider ON insurance_claims(provider_id);
CREATE INDEX idx_insurance_claims_status ON insurance_claims(status);
CREATE INDEX idx_insurance_claims_dates ON insurance_claims(submission_date, approval_date);
CREATE INDEX idx_insurance_claims_number ON insurance_claims(claim_number);
```

---

#### 4. `insurance_pre_authorizations` - Ø§Ù„ØªØµØ§Ø±ÙŠØ­ Ø§Ù„Ù…Ø³Ø¨Ù‚Ø©
```sql
CREATE TABLE insurance_pre_authorizations (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  public_id VARCHAR(255) UNIQUE NOT NULL,
  
  -- Ø±Ø¨Ø·
  patient_id UUID REFERENCES patients(id),
  policy_id UUID REFERENCES insurance_policies(id),
  provider_id UUID REFERENCES insurance_providers(id),
  
  -- ØªÙØ§ØµÙŠÙ„ Ø§Ù„ØªØµØ±ÙŠØ­
  authorization_number VARCHAR(255) UNIQUE,
  external_auth_id VARCHAR(255),
  
  -- Ø§Ù„Ø®Ø¯Ù…Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©
  service_type VARCHAR(100),
  service_description TEXT,
  procedure_codes JSONB DEFAULT '[]',
  
  -- Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…ØªÙˆÙ‚Ø¹
  estimated_cost DECIMAL(12,2),
  approved_amount DECIMAL(12,2),
  
  -- Ø§Ù„ØªÙˆØ§Ø±ÙŠØ®
  valid_from DATE,
  valid_until DATE,
  
  -- Ø§Ù„Ø­Ø§Ù„Ø©
  status VARCHAR(30) DEFAULT 'pending',
  -- 'pending', 'approved', 'rejected', 'expired', 'used'
  
  approval_code VARCHAR(255),
  rejection_reason TEXT,
  
  -- Metadata
  requested_by UUID REFERENCES users(id),
  metadata JSONB DEFAULT '{}',
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);

CREATE INDEX idx_pre_auth_patient ON insurance_pre_authorizations(patient_id);
CREATE INDEX idx_pre_auth_policy ON insurance_pre_authorizations(policy_id);
CREATE INDEX idx_pre_auth_status ON insurance_pre_authorizations(status);
```

---

#### 5. `insurance_eligibility_checks` - ÙØ­ÙˆØµØ§Øª Ø§Ù„Ø£Ù‡Ù„ÙŠØ©
```sql
CREATE TABLE insurance_eligibility_checks (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  
  -- Ø±Ø¨Ø·
  patient_id UUID REFERENCES patients(id),
  policy_id UUID REFERENCES insurance_policies(id),
  provider_id UUID REFERENCES insurance_providers(id),
  
  -- Ù†ØªÙŠØ¬Ø© Ø§Ù„ÙØ­Øµ
  is_eligible BOOLEAN,
  coverage_status VARCHAR(50),
  
  -- Ø§Ù„ØªÙØ§ØµÙŠÙ„
  covered_services JSONB,
  limitations JSONB,
  copay_info JSONB,
  
  -- Ø§Ù„Ø±Ø¯ Ù…Ù† Ø§Ù„Ø´Ø±ÙƒØ©
  provider_response JSONB,
  
  -- Metadata
  checked_by UUID REFERENCES users(id),
  checked_at TIMESTAMPTZ DEFAULT NOW()
);

CREATE INDEX idx_eligibility_patient ON insurance_eligibility_checks(patient_id);
CREATE INDEX idx_eligibility_date ON insurance_eligibility_checks(checked_at);
```

---

#### 6. `insurance_claim_history` - Ø³Ø¬Ù„ Ø§Ù„Ù…Ø·Ø§Ù„Ø¨Ø§Øª
```sql
CREATE TABLE insurance_claim_history (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  
  claim_id UUID REFERENCES insurance_claims(id) ON DELETE CASCADE,
  
  -- Ø§Ù„ØªØºÙŠÙŠØ±
  status_from VARCHAR(30),
  status_to VARCHAR(30),
  
  -- Ø§Ù„ØªÙØ§ØµÙŠÙ„
  action VARCHAR(50), -- 'submitted', 'approved', 'rejected', 'updated'
  notes TEXT,
  
  -- Ù…Ù† Ù‚Ø§Ù… Ø¨Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡
  performed_by UUID REFERENCES users(id),
  performed_at TIMESTAMPTZ DEFAULT NOW(),
  
  -- Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
  data_snapshot JSONB
);

CREATE INDEX idx_claim_history_claim ON insurance_claim_history(claim_id);
CREATE INDEX idx_claim_history_date ON insurance_claim_history(performed_at);
```

---

## ğŸ”Œ Ù†Ø¸Ø§Ù… Adapters Ø§Ù„Ù…ÙˆØ­Ø¯

### Ø§Ù„Ù…ÙÙ‡ÙˆÙ…:
ÙƒÙ„ Ø´Ø±ÙƒØ© ØªØ£Ù…ÙŠÙ† Ù„Ù‡Ø§ **Adapter** Ø®Ø§Øµ ÙŠØªØ±Ø¬Ù… Ø¨ÙŠÙ†:
- Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ÙˆØ­Ø¯ â† API Ø§Ù„Ø´Ø±ÙƒØ©
- API Ø§Ù„Ø´Ø±ÙƒØ© â† Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ÙˆØ­Ø¯

### Ø§Ù„ÙƒÙˆØ¯:

```typescript
// src/lib/insurance/adapters/base-adapter.ts

export interface InsuranceAdapter {
  // Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù€ Adapter
  readonly providerCode: string;
  readonly providerName: string;
  
  // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø£Ù‡Ù„ÙŠØ©
  checkEligibility(params: EligibilityParams): Promise<EligibilityResult>;
  
  // ØªÙ‚Ø¯ÙŠÙ… Ù…Ø·Ø§Ù„Ø¨Ø©
  submitClaim(params: ClaimSubmissionParams): Promise<ClaimSubmissionResult>;
  
  // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø·Ø§Ù„Ø¨Ø©
  getClaimStatus(claimId: string): Promise<ClaimStatusResult>;
  
  // Ø·Ù„Ø¨ ØªØµØ±ÙŠØ­ Ù…Ø³Ø¨Ù‚
  requestPreAuthorization(params: PreAuthParams): Promise<PreAuthResult>;
  
  // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„ØªØºØ·ÙŠØ©
  getCoverage(policyNumber: string, memberId: string): Promise<CoverageResult>;
  
  // Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§ØªØµØ§Ù„
  testConnection(): Promise<ConnectionTestResult>;
}

export abstract class BaseInsuranceAdapter implements InsuranceAdapter {
  abstract providerCode: string;
  abstract providerName: string;
  
  constructor(
    protected config: InsuranceProviderConfig,
    protected httpClient: HttpClient
  ) {}
  
  // Helper methods
  protected async makeRequest<T>(
    endpoint: string,
    method: 'GET' | 'POST' | 'PUT',
    data?: any
  ): Promise<T> {
    const url = `${this.config.baseUrl}${endpoint}`;
    
    const headers = await this.getAuthHeaders();
    
    try {
      const response = await this.httpClient.request<T>({
        url,
        method,
        headers,
        data,
        timeout: 30000, // 30 seconds
      });
      
      return response.data;
    } catch (error) {
      throw this.handleError(error);
    }
  }
  
  protected abstract getAuthHeaders(): Promise<Record<string, string>>;
  
  protected handleError(error: any): InsuranceError {
    // Unified error handling
    return new InsuranceError({
      code: error.code || 'UNKNOWN_ERROR',
      message: error.message,
      provider: this.providerCode,
      originalError: error,
    });
  }
  
  // Default implementations
  abstract checkEligibility(params: EligibilityParams): Promise<EligibilityResult>;
  abstract submitClaim(params: ClaimSubmissionParams): Promise<ClaimSubmissionResult>;
  abstract getClaimStatus(claimId: string): Promise<ClaimStatusResult>;
  abstract requestPreAuthorization(params: PreAuthParams): Promise<PreAuthResult>;
  abstract getCoverage(policyNumber: string, memberId: string): Promise<CoverageResult>;
  
  async testConnection(): Promise<ConnectionTestResult> {
    try {
      // Default implementation - override if needed
      await this.makeRequest('/health', 'GET');
      return { success: true, message: 'Connection successful' };
    } catch (error) {
      return { success: false, message: error.message };
    }
  }
}
```

---

### Ù…Ø«Ø§Ù„: Tawuniya Adapter

```typescript
// src/lib/insurance/adapters/tawuniya-adapter.ts

export class TawuniyaAdapter extends BaseInsuranceAdapter {
  providerCode = 'tawuniya';
  providerName = 'Ø§Ù„ØªØ¹Ø§ÙˆÙ†ÙŠØ©';
  
  protected async getAuthHeaders(): Promise<Record<string, string>> {
    // OAuth 2.0 implementation
    const token = await this.getAccessToken();
    
    return {
      'Authorization': `Bearer ${token}`,
      'Content-Type': 'application/json',
      'X-Provider-ID': this.config.credentials.providerId,
    };
  }
  
  private async getAccessToken(): Promise<string> {
    // Check cache first
    const cached = await this.getCachedToken();
    if (cached) return cached;
    
    // Get new token
    const response = await this.httpClient.post(
      `${this.config.baseUrl}/oauth/token`,
      {
        grant_type: 'client_credentials',
        client_id: this.config.credentials.clientId,
        client_secret: this.config.credentials.clientSecret,
      }
    );
    
    const token = response.data.access_token;
    
    // Cache for 1 hour
    await this.cacheToken(token, 3600);
    
    return token;
  }
  
  async checkEligibility(params: EligibilityParams): Promise<EligibilityResult> {
    const response = await this.makeRequest<TawuniyaEligibilityResponse>(
      '/eligibility/check',
      'POST',
      {
        policyNumber: params.policyNumber,
        memberId: params.memberId,
        serviceDate: params.serviceDate,
      }
    );
    
    // Transform Tawuniya response to unified format
    return {
      isEligible: response.eligible === 'Y',
      coverageStatus: this.mapCoverageStatus(response.status),
      coveredServices: response.coveredServices.map(s => ({
        code: s.serviceCode,
        name: s.serviceName,
        copay: s.copayAmount,
        limit: s.annualLimit,
      })),
      limitations: response.limitations,
      message: response.message,
    };
  }
  
  async submitClaim(params: ClaimSubmissionParams): Promise<ClaimSubmissionResult> {
    const response = await this.makeRequest<TawuniyaClaimResponse>(
      '/claims/submit',
      'POST',
      {
        claimType: 'outpatient',
        policyNumber: params.policyNumber,
        memberId: params.memberId,
        patientData: {
          nationalId: params.patient.nationalId,
          name: params.patient.name,
          dob: params.patient.dateOfBirth,
        },
        facilityData: {
          facilityCode: this.config.credentials.facilityCode,
          facilityName: 'Ù…Ø±ÙƒØ² Ø§Ù„Ù‡Ù…Ù…',
        },
        services: params.services.map(s => ({
          code: s.cptCode,
          description: s.description,
          quantity: s.quantity,
          unitPrice: s.unitPrice,
          totalAmount: s.quantity * s.unitPrice,
        })),
        diagnosis: {
          icd10Code: params.diagnosis.code,
          description: params.diagnosis.description,
        },
        claimedAmount: params.totalAmount,
        attachments: params.attachments.map(a => ({
          type: a.type,
          url: a.url,
        })),
      }
    );
    
    return {
      success: response.status === 'submitted',
      claimNumber: response.claimNumber,
      externalClaimId: response.tawuniyaClaimId,
      status: this.mapClaimStatus(response.status),
      estimatedProcessingTime: '2-5 minutes',
      message: response.message,
    };
  }
  
  async getClaimStatus(claimId: string): Promise<ClaimStatusResult> {
    const response = await this.makeRequest<TawuniyaStatusResponse>(
      `/claims/${claimId}/status`,
      'GET'
    );
    
    return {
      status: this.mapClaimStatus(response.status),
      claimedAmount: response.claimedAmount,
      approvedAmount: response.approvedAmount,
      rejectionReason: response.rejectionReason,
      approvalCode: response.approvalCode,
      lastUpdated: new Date(response.lastUpdated),
    };
  }
  
  async requestPreAuthorization(params: PreAuthParams): Promise<PreAuthResult> {
    const response = await this.makeRequest<TawuniyaPreAuthResponse>(
      '/pre-auth/request',
      'POST',
      {
        policyNumber: params.policyNumber,
        memberId: params.memberId,
        serviceType: params.serviceType,
        procedureCodes: params.procedureCodes,
        estimatedCost: params.estimatedCost,
        requestedDate: params.requestedDate,
      }
    );
    
    return {
      success: response.status === 'approved',
      authorizationNumber: response.authNumber,
      approvedAmount: response.approvedAmount,
      validFrom: new Date(response.validFrom),
      validUntil: new Date(response.validUntil),
      status: response.status,
      message: response.message,
    };
  }
  
  async getCoverage(policyNumber: string, memberId: string): Promise<CoverageResult> {
    const response = await this.makeRequest<TawuniyaCoverageResponse>(
      `/policies/${policyNumber}/coverage`,
      'POST',
      { memberId }
    );
    
    return {
      annualLimit: response.annualLimit,
      remainingLimit: response.remainingLimit,
      deductible: response.deductible,
      copayPercentage: response.copayPercentage,
      coveredServices: response.benefits,
      excludedServices: response.exclusions,
    };
  }
  
  // Helper methods
  private mapCoverageStatus(status: string): string {
    const mapping: Record<string, string> = {
      'ACTIVE': 'active',
      'EXPIRED': 'expired',
      'SUSPENDED': 'suspended',
    };
    return mapping[status] || 'unknown';
  }
  
  private mapClaimStatus(status: string): string {
    const mapping: Record<string, string> = {
      'SUBMITTED': 'submitted',
      'PENDING': 'pending',
      'UNDER_REVIEW': 'under_review',
      'APPROVED': 'approved',
      'REJECTED': 'rejected',
      'PAID': 'paid',
    };
    return mapping[status] || 'unknown';
  }
}
```

---

## ğŸ”„ Ø¯ÙˆØ±Ø© Ø§Ù„Ù…Ø·Ø§Ù„Ø¨Ø© Ø§Ù„Ø¢Ù„ÙŠØ© (Automated Claim Workflow)

### Ø§Ù„Ù…Ø±Ø§Ø­Ù„:

```
1. Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø·Ø§Ù„Ø¨Ø© (Draft)
   â†“
2. Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø£Ù‡Ù„ÙŠØ© (Eligibility Check) âœ…
   â†“
3. Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª (Validation) âœ…
   â†“
4. ØªÙ‚Ø¯ÙŠÙ… Ø§Ù„Ù…Ø·Ø§Ù„Ø¨Ø© (Submit) ğŸš€
   â†“
5. Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ø±Ø¯ (Pending) â³
   â†“
6. Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© (Under Review) ğŸ‘€
   â†“
7. Ø§Ù„Ù‚Ø±Ø§Ø± Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ:
   â”œâ”€ Ù…ÙˆØ§ÙÙ‚Ø© (Approved) âœ…
   â”œâ”€ Ù…ÙˆØ§ÙÙ‚Ø© Ø¬Ø²Ø¦ÙŠØ© (Partially Approved) âš ï¸
   â””â”€ Ø±ÙØ¶ (Rejected) âŒ
   â†“
8. Ø§Ù„Ø¯ÙØ¹ (Payment) ğŸ’°
   â†“
9. Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù…Ø·Ø§Ù„Ø¨Ø© (Closed) âœ“
```

---

### Ø§Ù„Ø£ØªÙ…ØªØ© Ø§Ù„Ø°ÙƒÙŠØ©:

#### 1. **Auto-Eligibility Check**
```typescript
// Ù‚Ø¨Ù„ ØªÙ‚Ø¯ÙŠÙ… Ø§Ù„Ù…Ø·Ø§Ù„Ø¨Ø©ØŒ ÙØ­Øµ ØªÙ„Ù‚Ø§Ø¦ÙŠ
async function autoEligibilityCheck(claim: InsuranceClaim): Promise<boolean> {
  const adapter = getAdapter(claim.providerId);
  
  const result = await adapter.checkEligibility({
    policyNumber: claim.policy.policyNumber,
    memberId: claim.policy.memberId,
    serviceDate: claim.serviceDate,
  });
  
  if (!result.isEligible) {
    await updateClaimStatus(claim.id, 'ineligible', result.message);
    await notifyStaff('Claim ineligible', claim.id);
    return false;
  }
  
  return true;
}
```

---

#### 2. **Auto-Submission**
```typescript
// ØªÙ‚Ø¯ÙŠÙ… ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø¨Ø¹Ø¯ Ù…ÙˆØ§ÙÙ‚Ø© Ø§Ù„Ø·Ø¨ÙŠØ¨
async function autoSubmitClaim(claim: InsuranceClaim): Promise<void> {
  // 1. Check eligibility
  const eligible = await autoEligibilityCheck(claim);
  if (!eligible) return;
  
  // 2. Validate data
  const validation = await validateClaimData(claim);
  if (!validation.valid) {
    await notifyStaff('Claim validation failed', claim.id, validation.errors);
    return;
  }
  
  // 3. Submit
  const adapter = getAdapter(claim.providerId);
  const result = await adapter.submitClaim(claim);
  
  // 4. Update status
  await updateClaim(claim.id, {
    status: 'submitted',
    externalClaimId: result.externalClaimId,
    claimNumber: result.claimNumber,
    submissionDate: new Date(),
  });
  
  // 5. Start polling for status
  await scheduleStatusCheck(claim.id, result.externalClaimId);
  
  // 6. Notify
  await notifyPatient('Claim submitted', claim.id);
  await notifyStaff('Claim submitted successfully', claim.id);
}
```

---

#### 3. **Auto-Status Polling**
```typescript
// ÙØ­Øµ Ø§Ù„Ø­Ø§Ù„Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ ÙƒÙ„ 5 Ø¯Ù‚Ø§Ø¦Ù‚
async function pollClaimStatus(claimId: string): Promise<void> {
  const claim = await getClaim(claimId);
  
  if (!['submitted', 'pending', 'under_review'].includes(claim.status)) {
    return; // Ù„Ø§ Ø­Ø§Ø¬Ø© Ù„Ù„ÙØ­Øµ
  }
  
  const adapter = getAdapter(claim.providerId);
  const status = await adapter.getClaimStatus(claim.externalClaimId);
  
  // ØªØ­Ø¯ÙŠØ« Ø¥Ø°Ø§ ØªØºÙŠØ±Øª Ø§Ù„Ø­Ø§Ù„Ø©
  if (status.status !== claim.status) {
    await updateClaim(claimId, {
      status: status.status,
      approvedAmount: status.approvedAmount,
      rejectionReason: status.rejectionReason,
      approvalCode: status.approvalCode,
    });
    
    // Ø¥Ø´Ø¹Ø§Ø±
    if (status.status === 'approved') {
      await notifyPatient('Claim approved!', claimId);
      await notifyStaff('Claim approved', claimId);
      await processPayment(claimId);
    } else if (status.status === 'rejected') {
      await notifyPatient('Claim rejected', claimId, status.rejectionReason);
      await notifyStaff('Claim rejected', claimId);
    }
  }
  
  // Ø¬Ø¯ÙˆÙ„Ø© Ø§Ù„ÙØ­Øµ Ø§Ù„ØªØ§Ù„ÙŠ
  if (['submitted', 'pending', 'under_review'].includes(status.status)) {
    await scheduleStatusCheck(claimId, claim.externalClaimId, 5 * 60 * 1000); // 5 minutes
  }
}
```

---

#### 4. **Smart Retry Logic**
```typescript
// Ø¥Ø¹Ø§Ø¯Ø© Ù…Ø­Ø§ÙˆÙ„Ø© Ø°ÙƒÙŠØ© Ø¹Ù†Ø¯ Ø§Ù„ÙØ´Ù„
async function submitClaimWithRetry(
  claim: InsuranceClaim,
  maxRetries: number = 3
): Promise<ClaimSubmissionResult> {
  let lastError: Error;
  
  for (let attempt = 1; attempt <= maxRetries; attempt++) {
    try {
      const adapter = getAdapter(claim.providerId);
      const result = await adapter.submitClaim(claim);
      
      return result;
    } catch (error) {
      lastError = error;
      
      // ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø®Ø·Ø£
      if (isRetryableError(error)) {
        // Exponential backoff
        const delay = Math.pow(2, attempt) * 1000;
        await sleep(delay);
        
        // Log
        await logClaimAttempt(claim.id, attempt, error.message);
      } else {
        // Ø®Ø·Ø£ ØºÙŠØ± Ù‚Ø§Ø¨Ù„ Ù„Ù„Ø¥Ø¹Ø§Ø¯Ø©
        throw error;
      }
    }
  }
  
  // ÙØ´Ù„Øª ÙƒÙ„ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª
  throw new Error(`Failed after ${maxRetries} attempts: ${lastError.message}`);
}

function isRetryableError(error: any): boolean {
  const retryableCodes = [
    'TIMEOUT',
    'NETWORK_ERROR',
    'SERVICE_UNAVAILABLE',
    'RATE_LIMIT',
  ];
  
  return retryableCodes.includes(error.code);
}
```

---

## ğŸ¨ ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… (UI/UX)

### 1. **ØµÙØ­Ø© Ø§Ù„Ù…Ø·Ø§Ù„Ø¨Ø§Øª Ù„Ù„Ù…ÙˆØ¸ÙÙŠÙ†**

```typescript
// src/app/(staff)/insurance/claims/page.tsx

export default function ClaimsPage() {
  return (
    <div className="space-y-6">
      {/* Header */}
      <div className="flex justify-between items-center">
        <h1 className="text-2xl font-bold">Ù…Ø·Ø§Ù„Ø¨Ø§Øª Ø§Ù„ØªØ£Ù…ÙŠÙ†</h1>
        <Button onClick={() => router.push('/insurance/claims/new')}>
          + Ù…Ø·Ø§Ù„Ø¨Ø© Ø¬Ø¯ÙŠØ¯Ø©
        </Button>
      </div>
      
      {/* Filters */}
      <Card>
        <div className="grid grid-cols-4 gap-4">
          <Select label="Ø§Ù„Ø­Ø§Ù„Ø©">
            <option value="">Ø§Ù„ÙƒÙ„</option>
            <option value="draft">Ù…Ø³ÙˆØ¯Ø©</option>
            <option value="submitted">Ù…Ù‚Ø¯Ù…Ø©</option>
            <option value="approved">Ù…ÙˆØ§ÙÙ‚ Ø¹Ù„ÙŠÙ‡Ø§</option>
            <option value="rejected">Ù…Ø±ÙÙˆØ¶Ø©</option>
          </Select>
          
          <Select label="Ø´Ø±ÙƒØ© Ø§Ù„ØªØ£Ù…ÙŠÙ†">
            <option value="">Ø§Ù„ÙƒÙ„</option>
            {providers.map(p => (
              <option key={p.id} value={p.id}>{p.name}</option>
            ))}
          </Select>
          
          <DatePicker label="Ù…Ù† ØªØ§Ø±ÙŠØ®" />
          <DatePicker label="Ø¥Ù„Ù‰ ØªØ§Ø±ÙŠØ®" />
        </div>
      </Card>
      
      {/* Claims Table */}
      <Card>
        <Table>
          <TableHeader>
            <TableRow>
              <TableHead>Ø±Ù‚Ù… Ø§Ù„Ù…Ø·Ø§Ù„Ø¨Ø©</TableHead>
              <TableHead>Ø§Ù„Ù…Ø±ÙŠØ¶</TableHead>
              <TableHead>Ø´Ø±ÙƒØ© Ø§Ù„ØªØ£Ù…ÙŠÙ†</TableHead>
              <TableHead>Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø·Ø§Ù„Ø¨</TableHead>
              <TableHead>Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø¹ØªÙ…Ø¯</TableHead>
              <TableHead>Ø§Ù„Ø­Ø§Ù„Ø©</TableHead>
              <TableHead>ØªØ§Ø±ÙŠØ® Ø§Ù„ØªÙ‚Ø¯ÙŠÙ…</TableHead>
              <TableHead>Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</TableHead>
            </TableRow>
          </TableHeader>
          <TableBody>
            {claims.map(claim => (
              <TableRow key={claim.id}>
                <TableCell>{claim.claimNumber}</TableCell>
                <TableCell>{claim.patient.name}</TableCell>
                <TableCell>
                  <div className="flex items-center gap-2">
                    <img src={claim.provider.logo} className="w-6 h-6" />
                    {claim.provider.name}
                  </div>
                </TableCell>
                <TableCell>{formatCurrency(claim.claimedAmount)}</TableCell>
                <TableCell>{formatCurrency(claim.approvedAmount)}</TableCell>
                <TableCell>
                  <StatusBadge status={claim.status} />
                </TableCell>
                <TableCell>{formatDate(claim.submissionDate)}</TableCell>
                <TableCell>
                  <DropdownMenu>
                    <DropdownMenuItem onClick={() => viewClaim(claim.id)}>
                      Ø¹Ø±Ø¶
                    </DropdownMenuItem>
                    <DropdownMenuItem onClick={() => checkStatus(claim.id)}>
                      ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ø§Ù„Ø©
                    </DropdownMenuItem>
                    {claim.status === 'draft' && (
                      <DropdownMenuItem onClick={() => submitClaim(claim.id)}>
                        ØªÙ‚Ø¯ÙŠÙ…
                      </DropdownMenuItem>
                    )}
                  </DropdownMenu>
                </TableCell>
              </TableRow>
            ))}
          </TableBody>
        </Table>
      </Card>
    </div>
  );
}
```

---

### 2. **Ù†Ù…ÙˆØ°Ø¬ Ù…Ø·Ø§Ù„Ø¨Ø© Ø¬Ø¯ÙŠØ¯Ø© (Ù…Ø¨Ø³Ø· ÙˆØ°ÙƒÙŠ)**

```typescript
// src/app/(staff)/insurance/claims/new/page.tsx

export default function NewClaimPage() {
  const [step, setStep] = useState(1);
  
  return (
    <div className="max-w-4xl mx-auto space-y-6">
      {/* Progress Steps */}
      <Steps current={step}>
        <Step title="Ø§Ù„Ù…Ø±ÙŠØ¶ ÙˆØ§Ù„Ø¨ÙˆÙ„ÙŠØµØ©" />
        <Step title="Ø§Ù„ØªØ´Ø®ÙŠØµ ÙˆØ§Ù„Ø®Ø¯Ù…Ø§Øª" />
        <Step title="Ø§Ù„Ù…Ø±ÙÙ‚Ø§Øª" />
        <Step title="Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© ÙˆØ§Ù„ØªÙ‚Ø¯ÙŠÙ…" />
      </Steps>
      
      {/* Step 1: Patient & Policy */}
      {step === 1 && (
        <Card>
          <h2 className="text-xl font-bold mb-4">Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø±ÙŠØ¶ ÙˆØ§Ù„ØªØ£Ù…ÙŠÙ†</h2>
          
          {/* Patient Search */}
          <PatientSearchAutocomplete
            onSelect={(patient) => {
              setSelectedPatient(patient);
              // Auto-load insurance policies
              loadPatientPolicies(patient.id);
            }}
          />
          
          {selectedPatient && (
            <>
              {/* Show patient info */}
              <PatientInfoCard patient={selectedPatient} />
              
              {/* Insurance Policy Selection */}
              <div className="mt-4">
                <label>Ø§Ø®ØªØ± Ø§Ù„Ø¨ÙˆÙ„ÙŠØµØ©</label>
                <Select
                  value={selectedPolicy}
                  onChange={(e) => {
                    setSelectedPolicy(e.target.value);
                    // Auto-check eligibility
                    checkEligibility(selectedPatient.id, e.target.value);
                  }}
                >
                  {policies.map(policy => (
                    <option key={policy.id} value={policy.id}>
                      {policy.provider.name} - {policy.policyNumber}
                      {policy.status === 'expired' && ' (Ù…Ù†ØªÙ‡ÙŠØ©)'}
                    </option>
                  ))}
                </Select>
              </div>
              
              {/* Eligibility Check Result */}
              {eligibilityResult && (
                <Alert type={eligibilityResult.isEligible ? 'success' : 'error'}>
                  {eligibilityResult.isEligible ? (
                    <>
                      âœ… Ø§Ù„Ù…Ø±ÙŠØ¶ Ù…Ø¤Ù‡Ù„ Ù„Ù„Ù…Ø·Ø§Ù„Ø¨Ø©
                      <div className="mt-2 text-sm">
                        Ø§Ù„Ø­Ø¯ Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ: {formatCurrency(eligibilityResult.remainingLimit)}
                      </div>
                    </>
                  ) : (
                    <>
                      âŒ Ø§Ù„Ù…Ø±ÙŠØ¶ ØºÙŠØ± Ù…Ø¤Ù‡Ù„: {eligibilityResult.message}
                    </>
                  )}
                </Alert>
              )}
            </>
          )}
          
          <div className="flex justify-end mt-6">
            <Button
              onClick={() => setStep(2)}
              disabled={!selectedPolicy || !eligibilityResult?.isEligible}
            >
              Ø§Ù„ØªØ§Ù„ÙŠ
            </Button>
          </div>
        </Card>
      )}
      
      {/* Step 2: Diagnosis & Services */}
      {step === 2 && (
        <Card>
          <h2 className="text-xl font-bold mb-4">Ø§Ù„ØªØ´Ø®ÙŠØµ ÙˆØ§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ù…Ù‚Ø¯Ù…Ø©</h2>
          
          {/* Diagnosis */}
          <div className="space-y-4">
            <div>
              <label>Ø§Ù„ØªØ´Ø®ÙŠØµ (ICD-10)</label>
              <ICD10SearchAutocomplete
                onSelect={(diagnosis) => setDiagnosis(diagnosis)}
              />
            </div>
            
            {diagnosis && (
              <Alert type="info">
                {diagnosis.code} - {diagnosis.description}
              </Alert>
            )}
          </div>
          
          {/* Services */}
          <div className="mt-6">
            <h3 className="font-semibold mb-2">Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ù…Ù‚Ø¯Ù…Ø©</h3>
            
            {services.map((service, index) => (
              <div key={index} className="grid grid-cols-5 gap-4 mb-4">
                <div className="col-span-2">
                  <CPTCodeSearchAutocomplete
                    value={service.code}
                    onChange={(code) => updateService(index, 'code', code)}
                  />
                </div>
                <Input
                  type="number"
                  label="Ø§Ù„ÙƒÙ…ÙŠØ©"
                  value={service.quantity}
                  onChange={(e) => updateService(index, 'quantity', e.target.value)}
                />
                <Input
                  type="number"
                  label="Ø§Ù„Ø³Ø¹Ø±"
                  value={service.unitPrice}
                  onChange={(e) => updateService(index, 'unitPrice', e.target.value)}
                />
                <div className="flex items-end">
                  <Button
                    variant="ghost"
                    onClick={() => removeService(index)}
                  >
                    Ø­Ø°Ù
                  </Button>
                </div>
              </div>
            ))}
            
            <Button variant="outline" onClick={addService}>
              + Ø¥Ø¶Ø§ÙØ© Ø®Ø¯Ù…Ø©
            </Button>
          </div>
          
          {/* Total */}
          <div className="mt-6 p-4 bg-gray-50 rounded">
            <div className="flex justify-between text-lg font-bold">
              <span>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹:</span>
              <span>{formatCurrency(calculateTotal())}</span>
            </div>
          </div>
          
          <div className="flex justify-between mt-6">
            <Button variant="outline" onClick={() => setStep(1)}>
              Ø§Ù„Ø³Ø§Ø¨Ù‚
            </Button>
            <Button onClick={() => setStep(3)}>
              Ø§Ù„ØªØ§Ù„ÙŠ
            </Button>
          </div>
        </Card>
      )}
      
      {/* Step 3: Attachments */}
      {step === 3 && (
        <Card>
          <h2 className="text-xl font-bold mb-4">Ø§Ù„Ù…Ø±ÙÙ‚Ø§Øª</h2>
          
          <FileUpload
            accept=".pdf,.jpg,.png"
            multiple
            onUpload={(files) => setAttachments(files)}
          />
          
          {attachments.length > 0 && (
            <div className="mt-4 space-y-2">
              {attachments.map((file, index) => (
                <div key={index} className="flex items-center justify-between p-2 bg-gray-50 rounded">
                  <div className="flex items-center gap-2">
                    <FileIcon type={file.type} />
                    <span>{file.name}</span>
                    <span className="text-sm text-gray-500">
                      ({formatFileSize(file.size)})
                    </span>
                  </div>
                  <Button
                    variant="ghost"
                    size="sm"
                    onClick={() => removeAttachment(index)}
                  >
                    Ø­Ø°Ù
                  </Button>
                </div>
              ))}
            </div>
          )}
          
          <div className="flex justify-between mt-6">
            <Button variant="outline" onClick={() => setStep(2)}>
              Ø§Ù„Ø³Ø§Ø¨Ù‚
            </Button>
            <Button onClick={() => setStep(4)}>
              Ø§Ù„ØªØ§Ù„ÙŠ
            </Button>
          </div>
        </Card>
      )}
      
      {/* Step 4: Review & Submit */}
      {step === 4 && (
        <Card>
          <h2 className="text-xl font-bold mb-4">Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ù…Ø·Ø§Ù„Ø¨Ø©</h2>
          
          {/* Summary */}
          <div className="space-y-4">
            <div>
              <h3 className="font-semibold">Ø§Ù„Ù…Ø±ÙŠØ¶</h3>
              <p>{selectedPatient.name}</p>
              <p className="text-sm text-gray-600">{selectedPatient.nationalId}</p>
            </div>
            
            <div>
              <h3 className="font-semibold">Ø§Ù„ØªØ£Ù…ÙŠÙ†</h3>
              <p>{selectedPolicy.provider.name}</p>
              <p className="text-sm text-gray-600">
                Ø§Ù„Ø¨ÙˆÙ„ÙŠØµØ©: {selectedPolicy.policyNumber}
              </p>
            </div>
            
            <div>
              <h3 className="font-semibold">Ø§Ù„ØªØ´Ø®ÙŠØµ</h3>
              <p>{diagnosis.code} - {diagnosis.description}</p>
            </div>
            
            <div>
              <h3 className="font-semibold">Ø§Ù„Ø®Ø¯Ù…Ø§Øª</h3>
              <Table>
                <TableHeader>
                  <TableRow>
                    <TableHead>Ø§Ù„ÙƒÙˆØ¯</TableHead>
                    <TableHead>Ø§Ù„ÙˆØµÙ</TableHead>
                    <TableHead>Ø§Ù„ÙƒÙ…ÙŠØ©</TableHead>
                    <TableHead>Ø§Ù„Ø³Ø¹Ø±</TableHead>
                    <TableHead>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹</TableHead>
                  </TableRow>
                </TableHeader>
                <TableBody>
                  {services.map((service, index) => (
                    <TableRow key={index}>
                      <TableCell>{service.code}</TableCell>
                      <TableCell>{service.description}</TableCell>
                      <TableCell>{service.quantity}</TableCell>
                      <TableCell>{formatCurrency(service.unitPrice)}</TableCell>
                      <TableCell>
                        {formatCurrency(service.quantity * service.unitPrice)}
                      </TableCell>
                    </TableRow>
                  ))}
                </TableBody>
              </Table>
            </div>
            
            <div className="p-4 bg-blue-50 rounded">
              <div className="flex justify-between text-lg font-bold">
                <span>Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ:</span>
                <span>{formatCurrency(calculateTotal())}</span>
              </div>
            </div>
          </div>
          
          <div className="flex justify-between mt-6">
            <Button variant="outline" onClick={() => setStep(3)}>
              Ø§Ù„Ø³Ø§Ø¨Ù‚
            </Button>
            <div className="flex gap-2">
              <Button
                variant="outline"
                onClick={saveDraft}
                disabled={submitting}
              >
                Ø­ÙØ¸ ÙƒÙ…Ø³ÙˆØ¯Ø©
              </Button>
              <Button
                onClick={submitClaim}
                disabled={submitting}
              >
                {submitting ? 'Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªÙ‚Ø¯ÙŠÙ…...' : 'ØªÙ‚Ø¯ÙŠÙ… Ø§Ù„Ù…Ø·Ø§Ù„Ø¨Ø©'}
              </Button>
            </div>
          </div>
        </Card>
      )}
    </div>
  );
}
```

---

## ğŸ“± Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ù…Ø·Ø§Ù„Ø¨Ø§Øª (Real-time Dashboard)

```typescript
// src/app/(admin)/insurance/dashboard/page.tsx

export default function InsuranceDashboard() {
  return (
    <div className="space-y-6">
      {/* KPIs */}
      <div className="grid grid-cols-4 gap-4">
        <StatCard
          title="Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø·Ø§Ù„Ø¨Ø§Øª"
          value={stats.totalClaims}
          icon={<FileTextIcon />}
          trend={+12}
        />
        <StatCard
          title="Ø§Ù„Ù…Ø·Ø§Ù„Ø¨Ø§Øª Ø§Ù„Ù…Ø¹ØªÙ…Ø¯Ø©"
          value={stats.approvedClaims}
          icon={<CheckCircleIcon />}
          trend={+8}
          color="green"
        />
        <StatCard
          title="Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©"
          value={stats.pendingClaims}
          icon={<ClockIcon />}
          color="yellow"
        />
        <StatCard
          title="Ù…Ø¹Ø¯Ù„ Ø§Ù„Ù‚Ø¨ÙˆÙ„"
          value={`${stats.approvalRate}%`}
          icon={<TrendingUpIcon />}
          trend={+5}
          color="blue"
        />
      </div>
      
      {/* Charts */}
      <div className="grid grid-cols-2 gap-6">
        <Card>
          <h3 className="font-semibold mb-4">Ø§Ù„Ù…Ø·Ø§Ù„Ø¨Ø§Øª Ø­Ø³Ø¨ Ø§Ù„Ø­Ø§Ù„Ø©</h3>
          <PieChart
            data={[
              { name: 'Ù…Ø¹ØªÙ…Ø¯Ø©', value: stats.approvedClaims, color: '#10b981' },
              { name: 'Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©', value: stats.pendingClaims, color: '#f59e0b' },
              { name: 'Ù…Ø±ÙÙˆØ¶Ø©', value: stats.rejectedClaims, color: '#ef4444' },
            ]}
          />
        </Card>
        
        <Card>
          <h3 className="font-semibold mb-4">Ø§Ù„Ù…Ø·Ø§Ù„Ø¨Ø§Øª Ø­Ø³Ø¨ Ø´Ø±ÙƒØ© Ø§Ù„ØªØ£Ù…ÙŠÙ†</h3>
          <BarChart
            data={stats.claimsByProvider}
            xKey="provider"
            yKey="count"
          />
        </Card>
      </div>
      
      {/* Recent Claims */}
      <Card>
        <h3 className="font-semibold mb-4">Ø§Ù„Ù…Ø·Ø§Ù„Ø¨Ø§Øª Ø§Ù„Ø£Ø®ÙŠØ±Ø©</h3>
        <ClaimsTable claims={recentClaims} />
      </Card>
      
      {/* Provider Performance */}
      <Card>
        <h3 className="font-semibold mb-4">Ø£Ø¯Ø§Ø¡ Ø´Ø±ÙƒØ§Øª Ø§Ù„ØªØ£Ù…ÙŠÙ†</h3>
        <Table>
          <TableHeader>
            <TableRow>
              <TableHead>Ø§Ù„Ø´Ø±ÙƒØ©</TableHead>
              <TableHead>Ù…ØªÙˆØ³Ø· ÙˆÙ‚Øª Ø§Ù„Ø±Ø¯</TableHead>
              <TableHead>Ù…Ø¹Ø¯Ù„ Ø§Ù„Ù‚Ø¨ÙˆÙ„</TableHead>
              <TableHead>Ø§Ù„Ø­Ø§Ù„Ø©</TableHead>
            </TableRow>
          </TableHeader>
          <TableBody>
            {providerPerformance.map(provider => (
              <TableRow key={provider.id}>
                <TableCell>
                  <div className="flex items-center gap-2">
                    <img src={provider.logo} className="w-8 h-8" />
                    {provider.name}
                  </div>
                </TableCell>
                <TableCell>{provider.avgResponseTime}</TableCell>
                <TableCell>
                  <ProgressBar value={provider.approvalRate} />
                </TableCell>
                <TableCell>
                  <StatusIndicator status={provider.healthStatus} />
                </TableCell>
              </TableRow>
            ))}
          </TableBody>
        </Table>
      </Card>
    </div>
  );
}
```

---

## ğŸš€ Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª Ø§Ù„Ø¥Ø¶Ø§ÙÙŠØ© Ø§Ù„Ù…Ø¨ØªÙƒØ±Ø©

### 1. **AI-Powered Claim Validation**
```typescript
// Ø§Ù„ØªØ­Ù‚Ù‚ Ø§Ù„Ø°ÙƒÙŠ Ù…Ù† Ø§Ù„Ù…Ø·Ø§Ù„Ø¨Ø§Øª Ù‚Ø¨Ù„ Ø§Ù„ØªÙ‚Ø¯ÙŠÙ…
async function validateClaimWithAI(claim: InsuranceClaim): Promise<ValidationResult> {
  const aiService = new AIValidationService();
  
  const checks = await aiService.analyze({
    diagnosis: claim.diagnosis,
    services: claim.services,
    patientHistory: claim.patient.medicalHistory,
    policyRules: claim.policy.rules,
  });
  
  return {
    isValid: checks.score > 0.8,
    confidence: checks.score,
    warnings: checks.warnings,
    suggestions: checks.suggestions,
    estimatedApprovalChance: checks.approvalProbability,
  };
}
```

---

### 2. **Smart Document OCR**
```typescript
// Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
async function extractClaimDataFromDocument(file: File): Promise<ClaimData> {
  const ocrService = new OCRService();
  
  const extracted = await ocrService.extract(file, {
    fields: [
      'patient_name',
      'national_id',
      'diagnosis_code',
      'service_codes',
      'amounts',
    ],
  });
  
  // Auto-fill the claim form
  return {
    patientName: extracted.patient_name,
    nationalId: extracted.national_id,
    diagnosis: await lookupICD10(extracted.diagnosis_code),
    services: await lookupCPTCodes(extracted.service_codes),
    amounts: extracted.amounts,
  };
}
```

---

### 3. **Predictive Analytics**
```typescript
// ØªÙˆÙ‚Ø¹ Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù…Ø·Ø§Ù„Ø¨Ø© Ù‚Ø¨Ù„ Ø§Ù„ØªÙ‚Ø¯ÙŠÙ…
async function predictClaimOutcome(claim: InsuranceClaim): Promise<Prediction> {
  const mlModel = await loadPredictionModel();
  
  const features = extractFeatures(claim);
  const prediction = await mlModel.predict(features);
  
  return {
    likelyOutcome: prediction.outcome, // 'approved', 'rejected', 'review'
    confidence: prediction.confidence,
    estimatedAmount: prediction.estimatedApprovedAmount,
    suggestedImprovements: prediction.suggestions,
  };
}
```

---

### 4. **Batch Claims Processing**
```typescript
// Ù…Ø¹Ø§Ù„Ø¬Ø© Ø¯ÙØ¹Ø§Øª Ù…Ù† Ø§Ù„Ù…Ø·Ø§Ù„Ø¨Ø§Øª
async function processBatchClaims(claims: InsuranceClaim[]): Promise<BatchResult> {
  const results = await Promise.allSettled(
    claims.map(claim => autoSubmitClaim(claim))
  );
  
  return {
    total: claims.length,
    successful: results.filter(r => r.status === 'fulfilled').length,
    failed: results.filter(r => r.status === 'rejected').length,
    details: results,
  };
}
```

---

## ğŸ“Š Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± ÙˆØ§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª

### 1. **ØªÙ‚Ø±ÙŠØ± Ø£Ø¯Ø§Ø¡ Ø´Ø±ÙƒØ§Øª Ø§Ù„ØªØ£Ù…ÙŠÙ†**
- Ù…ØªÙˆØ³Ø· ÙˆÙ‚Øª Ø§Ù„Ø±Ø¯ Ù„ÙƒÙ„ Ø´Ø±ÙƒØ©
- Ù…Ø¹Ø¯Ù„ Ø§Ù„Ù‚Ø¨ÙˆÙ„/Ø§Ù„Ø±ÙØ¶
- Ø§Ù„Ù…Ø¨Ø§Ù„Øº Ø§Ù„Ù…Ø¹ØªÙ…Ø¯Ø© vs Ø§Ù„Ù…Ø·Ø§Ù„Ø¨ Ø¨Ù‡Ø§
- ØªÙˆÙØ± Ø§Ù„Ø®Ø¯Ù…Ø© (Uptime)

### 2. **ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ù…Ø·Ø§Ù„Ø¨Ø§Øª Ø§Ù„Ø´Ù‡Ø±ÙŠ**
- Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø·Ø§Ù„Ø¨Ø§Øª Ø§Ù„Ù…Ù‚Ø¯Ù…Ø©
- Ø§Ù„Ù…Ø¨Ø§Ù„Øº Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØ©
- Ù…Ø¹Ø¯Ù„ Ø§Ù„Ù‚Ø¨ÙˆÙ„
- Ø£ÙƒØ«Ø± Ø§Ù„ØªØ´Ø®ÙŠØµØ§Øª Ø´ÙŠÙˆØ¹Ø§Ù‹

### 3. **ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø£Ø¯Ø§Ø¡ Ø§Ù„Ù…Ø§Ù„ÙŠ**
- Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª Ù…Ù† Ø§Ù„ØªØ£Ù…ÙŠÙ†
- Ø§Ù„Ù…Ø¨Ø§Ù„Øº Ø§Ù„Ù…Ø¹Ù„Ù‚Ø©
- Ø§Ù„Ù…Ø¨Ø§Ù„Øº Ø§Ù„Ù…Ø±ÙÙˆØ¶Ø©
- Ù…Ø¹Ø¯Ù„ Ø§Ù„ØªØ­ØµÙŠÙ„

---

## â±ï¸ Ø®Ø·Ø© Ø§Ù„ØªÙ†ÙÙŠØ°

### Ø§Ù„Ù…Ø±Ø­Ù„Ø© 1: Ø§Ù„Ø¨Ù†ÙŠØ© Ø§Ù„ØªØ­ØªÙŠØ© (2 Ø£Ø³Ø§Ø¨ÙŠØ¹)
- [ ] Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
- [ ] Ø¨Ù†Ø§Ø¡ Base Adapter
- [ ] Ù†Ø¸Ø§Ù… Configuration Management
- [ ] Testing framework

### Ø§Ù„Ù…Ø±Ø­Ù„Ø© 2: Ø§Ù„ØªÙƒØ§Ù…Ù„Ø§Øª (4 Ø£Ø³Ø§Ø¨ÙŠØ¹)
- [ ] Tawuniya Adapter (Ø£Ø³Ø¨ÙˆØ¹ 1)
- [ ] Bupa Adapter (Ø£Ø³Ø¨ÙˆØ¹ 1)
- [ ] Medgulf + Malath (Ø£Ø³Ø¨ÙˆØ¹ 2)
- [ ] Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ø´Ø±ÙƒØ§Øª (Ø£Ø³Ø¨ÙˆØ¹ 3-4)

### Ø§Ù„Ù…Ø±Ø­Ù„Ø© 3: Ø§Ù„Ø£ØªÙ…ØªØ© (2 Ø£Ø³Ø§Ø¨ÙŠØ¹)
- [ ] Auto-eligibility checks
- [ ] Auto-submission workflow
- [ ] Status polling system
- [ ] Smart retry logic

### Ø§Ù„Ù…Ø±Ø­Ù„Ø© 4: UI/UX (2 Ø£Ø³Ø§Ø¨ÙŠØ¹)
- [ ] Claims management page
- [ ] New claim wizard
- [ ] Dashboard
- [ ] Reports

### Ø§Ù„Ù…Ø±Ø­Ù„Ø© 5: Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø© (2 Ø£Ø³Ø§Ø¨ÙŠØ¹)
- [ ] AI validation
- [ ] OCR integration
- [ ] Predictive analytics
- [ ] Batch processing

**Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹: 12 Ø£Ø³Ø¨ÙˆØ¹ (3 Ø£Ø´Ù‡Ø±)**

---

## ğŸ’° Ø§Ù„ØªÙƒÙ„ÙØ© Ø§Ù„Ù…ØªÙˆÙ‚Ø¹Ø©

| Ø§Ù„Ø¨Ù†Ø¯ | Ø§Ù„ØªÙƒÙ„ÙØ© Ø§Ù„Ø´Ù‡Ø±ÙŠØ© |
|------|-----------------|
| API Calls (Ù…ØªÙˆØ³Ø· 1000 Ù…Ø·Ø§Ù„Ø¨Ø©/Ø´Ù‡Ø±) | $50-100 |
| OCR Service | $30-50 |
| AI/ML Services | $100-200 |
| Storage | $20 |
| **Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹** | **$200-370/Ø´Ù‡Ø±** |

---

## ğŸ¯ Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù…ØªÙˆÙ‚Ø¹Ø©

Ø¨Ø¹Ø¯ Ø§Ù„ØªÙ†ÙÙŠØ° Ø§Ù„ÙƒØ§Ù…Ù„:
- âœ… **ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„ÙˆÙ‚Øª**: Ù…Ù† 30 Ø¯Ù‚ÙŠÙ‚Ø© Ø¥Ù„Ù‰ 2 Ø¯Ù‚ÙŠÙ‚Ø© Ù„ÙƒÙ„ Ù…Ø·Ø§Ù„Ø¨Ø©
- âœ… **ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡**: Ù…Ù† 15% Ø¥Ù„Ù‰ Ø£Ù‚Ù„ Ù…Ù† 2%
- âœ… **Ø²ÙŠØ§Ø¯Ø© Ù…Ø¹Ø¯Ù„ Ø§Ù„Ù‚Ø¨ÙˆÙ„**: Ù…Ù† 70% Ø¥Ù„Ù‰ 90%+
- âœ… **Ø£ØªÙ…ØªØ© 80%** Ù…Ù† Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª
- âœ… **ØªÙ…ÙŠØ² ÙˆØ§Ø¶Ø­** Ø¹Ù† Ø§Ù„Ù…Ù†Ø§ÙØ³ÙŠÙ†

---

*ØªÙ… Ø¥Ø¹Ø¯Ø§Ø¯ Ù‡Ø°Ø§ Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø¨ØªØ§Ø±ÙŠØ®: 2025-01-17*  
*Ø§Ù„Ø­Ø§Ù„Ø©: Ø¬Ø§Ù‡Ø² Ù„Ù„ØªÙ†ÙÙŠØ°*  
*Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©: ğŸ”´ Ø¹Ø§Ù„ÙŠØ© Ø¬Ø¯Ø§Ù‹*

