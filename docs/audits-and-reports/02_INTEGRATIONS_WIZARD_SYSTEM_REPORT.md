# ğŸ”Œ Ù†Ø¸Ø§Ù… Ø§Ù„ØªÙƒØ§Ù…Ù„Ø§Øª Ù…Ø¹ Wizard UI - ØªÙ‚Ø±ÙŠØ± Ø´Ø§Ù…Ù„
## Integrations Wizard System - Comprehensive Report

**ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯**: 2025-01-17  
**Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©**: 30% (Ø¶Ø¹ÙŠÙ Ø¬Ø¯Ø§Ù‹)  
**Ø§Ù„Ù‡Ø¯Ù**: 95% (Ù†Ø¸Ø§Ù… ÙˆÙŠØ²Ø±Ø¯ Ù…ØªÙƒØ§Ù…Ù„ ÙˆÙ…Ø¤ØªÙ…Øª)

---

## ğŸ“Š Ø§Ù„Ù…Ù„Ø®Øµ Ø§Ù„ØªÙ†ÙÙŠØ°ÙŠ

### Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø­Ø§Ù„ÙŠ:
- âŒ **UI Ù…Ø­Ø°ÙˆÙ** (IntegrationsTab.tsx)
- âŒ **Ù…Ø¹Ø¸Ù… Ø§Ù„ØªÙƒØ§Ù…Ù„Ø§Øª Ù…Ø¹Ø·Ù‘Ù„Ø©** (WhatsApp, SMS, Email)
- âŒ **Ø§Ù„ØªØ´ÙÙŠØ± Base64 ÙÙ‚Ø·** (ØºÙŠØ± Ø¢Ù…Ù†)
- âŒ **Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙˆÙŠØ²Ø±Ø¯** Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
- âŒ **ØªØ¬Ø±Ø¨Ø© Ù…Ø³ØªØ®Ø¯Ù… Ø³ÙŠØ¦Ø©**

### Ø§Ù„Ø±Ø¤ÙŠØ© Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„ÙŠØ©:
- âœ… **Wizard UI Ù…ØªÙ‚Ø¯Ù…** Ù…Ø¹ Ø®Ø·ÙˆØ§Øª ÙˆØ§Ø¶Ø­Ø©
- âœ… **ØªØ¹Ù„ÙŠÙ…Ø§Øª ØªÙØ§Ø¹Ù„ÙŠØ©** Ù„ÙƒÙ„ Ù…Ø±Ø­Ù„Ø©
- âœ… **Ø§Ø®ØªØ¨Ø§Ø± ÙÙˆØ±ÙŠ** Ù„Ù„Ù…Ø¯Ø®Ù„Ø§Øª
- âœ… **ØªØ¬Ø±Ø¨Ø© Ù…Ø³ØªØ®Ø¯Ù… Ù…Ù…ØªØ¹Ø©** ÙˆÙ…Ø­ÙØ²Ø©
- âœ… **Ø¯Ø¹Ù… ØªÙƒØ§Ù…Ù„Ø§Øª Ù…ØªØ¹Ø¯Ø¯Ø©** Ù„Ù†ÙØ³ Ø§Ù„Ø®Ø¯Ù…Ø©
- âœ… **Ø¥Ø¶Ø§ÙØ© Ø´Ø±ÙƒØ§Øª Ø¬Ø¯ÙŠØ¯Ø©** Ø¨Ø¯ÙˆÙ† ÙƒÙˆØ¯

---

## ğŸ§™â€â™‚ï¸ Ù†Ø¸Ø§Ù… Wizard UI Ø§Ù„Ù…ØªÙ‚Ø¯Ù…

### Ø§Ù„ÙÙ„Ø³ÙØ©:
**"ÙƒÙ„ ØªÙƒØ§Ù…Ù„ = Ø±Ø­Ù„Ø© Ø³Ù„Ø³Ø© ÙˆÙ…Ù…ØªØ¹Ø©"**

Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† Ù†Ù…Ø§Ø°Ø¬ Ù…Ø¹Ù‚Ø¯Ø©ØŒ ÙƒÙ„ ØªÙƒØ§Ù…Ù„ ÙŠØµØ¨Ø­:
- ğŸ¯ **Ø±Ø­Ù„Ø© ÙˆØ§Ø¶Ø­Ø©** Ù…Ø¹ Ø®Ø·ÙˆØ§Øª Ù…Ø­Ø¯Ø¯Ø©
- ğŸ“š **ØªØ¹Ù„ÙŠÙ…Ø§Øª ØªÙØ§Ø¹Ù„ÙŠØ©** ÙÙŠ ÙƒÙ„ Ø®Ø·ÙˆØ©
- âœ… **Ø§Ø®ØªØ¨Ø§Ø± ÙÙˆØ±ÙŠ** Ù„Ù„Ù…Ø¯Ø®Ù„Ø§Øª
- ğŸ‰ **ØªØ£ÙƒÙŠØ¯Ø§Øª Ø¥ÙŠØ¬Ø§Ø¨ÙŠØ©** Ø¹Ù†Ø¯ Ø§Ù„Ù†Ø¬Ø§Ø­

---

## ğŸ—ï¸ Ø§Ù„Ø¨Ù†ÙŠØ© Ø§Ù„Ù…Ø¹Ù…Ø§Ø±ÙŠØ©

### 1. **Wizard Engine** - Ù…Ø­Ø±Ùƒ Ø§Ù„ÙˆÙŠØ²Ø±Ø¯
```typescript
// src/lib/integrations/wizard-engine.ts

export interface WizardStep {
  id: string;
  title: string;
  description: string;
  icon: string;
  component: React.ComponentType<WizardStepProps>;
  validation: ValidationRule[];
  dependencies?: string[];
  optional?: boolean;
}

export interface WizardConfig {
  id: string;
  name: string;
  description: string;
  icon: string;
  category: 'communication' | 'payment' | 'scheduling' | 'analytics';
  steps: WizardStep[];
  allowMultiple: boolean; // Ù‡Ù„ ÙŠØ³Ù…Ø­ Ø¨ØªÙƒØ§Ù…Ù„Ø§Øª Ù…ØªØ¹Ø¯Ø¯Ø©ØŸ
  maxInstances?: number;
}

export class WizardEngine {
  private configs: Map<string, WizardConfig> = new Map();
  
  registerWizard(config: WizardConfig): void {
    this.configs.set(config.id, config);
  }
  
  getWizard(id: string): WizardConfig | undefined {
    return this.configs.get(id);
  }
  
  getAllWizards(): WizardConfig[] {
    return Array.from(this.configs.values());
  }
  
  getWizardsByCategory(category: string): WizardConfig[] {
    return this.getAllWizards().filter(w => w.category === category);
  }
}
```

---

### 2. **Wizard Components** - Ù…ÙƒÙˆÙ†Ø§Øª Ø§Ù„ÙˆÙŠØ²Ø±Ø¯

#### A. **Wizard Container** - Ø§Ù„Ø­Ø§ÙˆÙŠ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ
```typescript
// src/components/integrations/wizard/WizardContainer.tsx

interface WizardContainerProps {
  wizardId: string;
  onComplete: (result: IntegrationResult) => void;
  onCancel: () => void;
}

export function WizardContainer({ wizardId, onComplete, onCancel }: WizardContainerProps) {
  const [currentStep, setCurrentStep] = useState(0);
  const [stepData, setStepData] = useState<Record<string, any>>({});
  const [isValidating, setIsValidating] = useState(false);
  
  const wizard = wizardEngine.getWizard(wizardId);
  const currentStepConfig = wizard?.steps[currentStep];
  
  const handleNext = async () => {
    if (!currentStepConfig) return;
    
    setIsValidating(true);
    
    try {
      // Validate current step
      const validation = await validateStep(currentStepConfig, stepData);
      
      if (!validation.isValid) {
        showError(validation.errors);
        return;
      }
      
      // Save step data
      setStepData(prev => ({
        ...prev,
        [currentStepConfig.id]: stepData[currentStepConfig.id]
      }));
      
      // Move to next step
      if (currentStep < wizard.steps.length - 1) {
        setCurrentStep(currentStep + 1);
      } else {
        // Complete wizard
        await completeWizard(wizardId, stepData);
      }
    } catch (error) {
      showError(error.message);
    } finally {
      setIsValidating(false);
    }
  };
  
  const handlePrevious = () => {
    if (currentStep > 0) {
      setCurrentStep(currentStep - 1);
    }
  };
  
  const handleStepDataChange = (stepId: string, data: any) => {
    setStepData(prev => ({
      ...prev,
      [stepId]: data
    }));
  };
  
  return (
    <div className="wizard-container">
      {/* Progress Bar */}
      <WizardProgress
        steps={wizard.steps}
        currentStep={currentStep}
      />
      
      {/* Step Content */}
      <div className="wizard-content">
        <WizardStepHeader
          step={currentStepConfig}
          stepNumber={currentStep + 1}
          totalSteps={wizard.steps.length}
        />
        
        <WizardStepContent
          step={currentStepConfig}
          data={stepData[currentStepConfig.id]}
          onChange={(data) => handleStepDataChange(currentStepConfig.id, data)}
        />
      </div>
      
      {/* Navigation */}
      <WizardNavigation
        currentStep={currentStep}
        totalSteps={wizard.steps.length}
        onNext={handleNext}
        onPrevious={handlePrevious}
        onCancel={onCancel}
        isValidating={isValidating}
        canProceed={isStepValid(currentStepConfig, stepData)}
      />
    </div>
  );
}
```

---

#### B. **Wizard Progress** - Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù…
```typescript
// src/components/integrations/wizard/WizardProgress.tsx

interface WizardProgressProps {
  steps: WizardStep[];
  currentStep: number;
}

export function WizardProgress({ steps, currentStep }: WizardProgressProps) {
  return (
    <div className="wizard-progress">
      <div className="progress-bar">
        <div 
          className="progress-fill"
          style={{ width: `${((currentStep + 1) / steps.length) * 100}%` }}
        />
      </div>
      
      <div className="steps-indicators">
        {steps.map((step, index) => (
          <div
            key={step.id}
            className={`step-indicator ${
              index <= currentStep ? 'completed' : 
              index === currentStep ? 'current' : 'pending'
            }`}
          >
            <div className="step-icon">
              {index < currentStep ? (
                <CheckIcon className="w-5 h-5" />
              ) : (
                <span className="step-number">{index + 1}</span>
              )}
            </div>
            <div className="step-label">
              <span className="step-title">{step.title}</span>
              {index === currentStep && (
                <span className="step-description">{step.description}</span>
              )}
            </div>
          </div>
        ))}
      </div>
    </div>
  );
}
```

---

#### C. **Wizard Step Content** - Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø®Ø·ÙˆØ©
```typescript
// src/components/integrations/wizard/WizardStepContent.tsx

interface WizardStepContentProps {
  step: WizardStep;
  data: any;
  onChange: (data: any) => void;
}

export function WizardStepContent({ step, data, onChange }: WizardStepContentProps) {
  const StepComponent = step.component;
  
  return (
    <div className="wizard-step-content">
      <div className="step-header">
        <div className="step-icon">
          <span className="text-2xl">{step.icon}</span>
        </div>
        <div className="step-info">
          <h2 className="step-title">{step.title}</h2>
          <p className="step-description">{step.description}</p>
        </div>
      </div>
      
      <div className="step-body">
        <StepComponent
          data={data}
          onChange={onChange}
          validation={step.validation}
        />
      </div>
      
      {/* Help Section */}
      <WizardHelp
        stepId={step.id}
        data={data}
      />
    </div>
  );
}
```

---

## ğŸ”§ ØªÙƒØ§Ù…Ù„Ø§Øª Ù…Ø­Ø¯Ø¯Ø© Ù…Ø¹ Wizard UI

### 1. **WhatsApp Business API Wizard**

```typescript
// src/lib/integrations/wizards/whatsapp-wizard.ts

export const whatsappWizardConfig: WizardConfig = {
  id: 'whatsapp',
  name: 'WhatsApp Business API',
  description: 'Ø±Ø¨Ø· Ø­Ø³Ø§Ø¨ WhatsApp Business Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„',
  icon: 'ğŸ“±',
  category: 'communication',
  allowMultiple: false, // ØªÙƒØ§Ù…Ù„ ÙˆØ§Ø­Ø¯ ÙÙ‚Ø·
  steps: [
    {
      id: 'account-setup',
      title: 'Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø­Ø³Ø§Ø¨',
      description: 'Ø£Ø¯Ø®Ù„ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø­Ø³Ø§Ø¨ WhatsApp Business',
      icon: 'ğŸ¢',
      component: WhatsAppAccountStep,
      validation: [
        { field: 'businessName', required: true, message: 'Ø§Ø³Ù… Ø§Ù„Ù†Ø´Ø§Ø· Ø§Ù„ØªØ¬Ø§Ø±ÙŠ Ù…Ø·Ù„ÙˆØ¨' },
        { field: 'phoneNumber', required: true, pattern: /^\+966[0-9]{9}$/, message: 'Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ ØºÙŠØ± ØµØ­ÙŠØ­' },
      ],
    },
    {
      id: 'api-credentials',
      title: 'Ù…Ø¹Ù„ÙˆÙ…Ø§Øª API',
      description: 'Ø£Ø¯Ø®Ù„ Ø¨ÙŠØ§Ù†Ø§Øª API Ù…Ù† Meta Business',
      icon: 'ğŸ”‘',
      component: WhatsAppCredentialsStep,
      validation: [
        { field: 'accessToken', required: true, minLength: 50, message: 'Access Token Ù…Ø·Ù„ÙˆØ¨' },
        { field: 'phoneNumberId', required: true, message: 'Phone Number ID Ù…Ø·Ù„ÙˆØ¨' },
        { field: 'webhookVerifyToken', required: true, minLength: 10, message: 'Webhook Verify Token Ù…Ø·Ù„ÙˆØ¨' },
      ],
    },
    {
      id: 'webhook-setup',
      title: 'Ø¥Ø¹Ø¯Ø§Ø¯ Webhook',
      description: 'Ù‚Ù… Ø¨Ø¥Ø¹Ø¯Ø§Ø¯ Webhook Ù„Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„',
      icon: 'ğŸ”—',
      component: WhatsAppWebhookStep,
      validation: [
        { field: 'webhookUrl', required: true, url: true, message: 'Webhook URL Ù…Ø·Ù„ÙˆØ¨' },
      ],
    },
    {
      id: 'test-connection',
      title: 'Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§ØªØµØ§Ù„',
      description: 'ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù† ÙƒÙ„ Ø´ÙŠØ¡ ÙŠØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­',
      icon: 'ğŸ§ª',
      component: WhatsAppTestStep,
      validation: [],
    },
  ],
};
```

---

#### **WhatsApp Account Step** - Ø®Ø·ÙˆØ© Ø§Ù„Ø­Ø³Ø§Ø¨
```typescript
// src/components/integrations/wizard/steps/WhatsAppAccountStep.tsx

interface WhatsAppAccountStepProps {
  data: any;
  onChange: (data: any) => void;
  validation: ValidationRule[];
}

export function WhatsAppAccountStep({ data, onChange, validation }: WhatsAppAccountStepProps) {
  const [errors, setErrors] = useState<Record<string, string>>({});
  
  const handleChange = (field: string, value: any) => {
    const newData = { ...data, [field]: value };
    onChange(newData);
    
    // Real-time validation
    validateField(field, value, validation);
  };
  
  return (
    <div className="whatsapp-account-step">
      <div className="step-intro">
        <h3>Ù…Ø±Ø­Ø¨Ø§Ù‹! ğŸ‘‹</h3>
        <p>Ø³Ù†Ø³Ø§Ø¹Ø¯Ùƒ ÙÙŠ Ø±Ø¨Ø· Ø­Ø³Ø§Ø¨ WhatsApp Business Ù…Ø¹ Ø§Ù„Ù†Ø¸Ø§Ù…</p>
      </div>
      
      <div className="form-section">
        <div className="form-group">
          <label htmlFor="businessName">
            Ø§Ø³Ù… Ø§Ù„Ù†Ø´Ø§Ø· Ø§Ù„ØªØ¬Ø§Ø±ÙŠ *
            <span className="help-text">
              Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø°ÙŠ Ø³ÙŠØ¸Ù‡Ø± Ù„Ù„Ù…Ø±Ø¶Ù‰ ÙÙŠ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„
            </span>
          </label>
          <Input
            id="businessName"
            value={data.businessName || ''}
            onChange={(e) => handleChange('businessName', e.target.value)}
            placeholder="Ù…Ø«Ø§Ù„: Ù…Ø±ÙƒØ² Ø§Ù„Ù‡Ù…Ù… Ù„Ù„Ø±Ø¹Ø§ÙŠØ© Ø§Ù„ØµØ­ÙŠØ©"
            error={errors.businessName}
          />
        </div>
        
        <div className="form-group">
          <label htmlFor="phoneNumber">
            Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ *
            <span className="help-text">
              Ø±Ù‚Ù… WhatsApp Business (ÙŠØ¬Ø¨ Ø£Ù† ÙŠØ¨Ø¯Ø£ Ø¨Ù€ +966)
            </span>
          </label>
          <PhoneInput
            id="phoneNumber"
            value={data.phoneNumber || ''}
            onChange={(value) => handleChange('phoneNumber', value)}
            country="SA"
            placeholder="+966501234567"
            error={errors.phoneNumber}
          />
        </div>
        
        <div className="form-group">
          <label htmlFor="businessCategory">
            ÙØ¦Ø© Ø§Ù„Ù†Ø´Ø§Ø· Ø§Ù„ØªØ¬Ø§Ø±ÙŠ
            <span className="help-text">
              Ø§Ø®ØªØ± Ø§Ù„ÙØ¦Ø© Ø§Ù„Ø£Ù‚Ø±Ø¨ Ù„Ù†Ø´Ø§Ø·Ùƒ
            </span>
          </label>
          <Select
            value={data.businessCategory || ''}
            onChange={(e) => handleChange('businessCategory', e.target.value)}
          >
            <option value="">Ø§Ø®ØªØ± Ø§Ù„ÙØ¦Ø©</option>
            <option value="healthcare">Ø§Ù„Ø±Ø¹Ø§ÙŠØ© Ø§Ù„ØµØ­ÙŠØ©</option>
            <option value="medical">Ø§Ù„Ø·Ø¨</option>
            <option value="clinic">Ø§Ù„Ø¹ÙŠØ§Ø¯Ø©</option>
            <option value="hospital">Ø§Ù„Ù…Ø³ØªØ´ÙÙ‰</option>
          </Select>
        </div>
      </div>
      
      <div className="help-section">
        <h4>ğŸ’¡ Ù†ØµØ§Ø¦Ø­ Ù…Ù‡Ù…Ø©:</h4>
        <ul>
          <li>ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù† Ø§Ù„Ø±Ù‚Ù… Ù…Ø³Ø¬Ù„ ÙÙŠ WhatsApp Business</li>
          <li>Ø§Ù„Ø§Ø³Ù… Ø³ÙŠØ¸Ù‡Ø± ÙÙŠ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ù…Ø±Ø³Ù„Ø©</li>
          <li>ÙŠÙ…ÙƒÙ†Ùƒ ØªØºÙŠÙŠØ± Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ù„Ø§Ø­Ù‚Ø§Ù‹</li>
        </ul>
      </div>
    </div>
  );
}
```

---

#### **WhatsApp Credentials Step** - Ø®Ø·ÙˆØ© Ø¨ÙŠØ§Ù†Ø§Øª API
```typescript
// src/components/integrations/wizard/steps/WhatsAppCredentialsStep.tsx

export function WhatsAppCredentialsStep({ data, onChange, validation }: WhatsAppCredentialsStepProps) {
  const [showSecrets, setShowSecrets] = useState(false);
  const [isValidating, setIsValidating] = useState(false);
  
  return (
    <div className="whatsapp-credentials-step">
      <div className="step-intro">
        <h3>Ù…Ø¹Ù„ÙˆÙ…Ø§Øª API Ù…Ù† Meta Business ğŸ”‘</h3>
        <p>Ø³ØªØ­ØªØ§Ø¬ Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù‡Ø°Ù‡ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Meta Business Manager</p>
      </div>
      
      <div className="credentials-guide">
        <div className="guide-card">
          <h4>ğŸ“‹ Ø®Ø·ÙˆØ§Øª Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:</h4>
          <ol>
            <li>Ø§Ø°Ù‡Ø¨ Ø¥Ù„Ù‰ <a href="https://business.facebook.com" target="_blank">Meta Business Manager</a></li>
            <li>Ø§Ù†ØªÙ‚Ù„ Ø¥Ù„Ù‰ "WhatsApp Business API"</li>
            <li>Ø§Ø®ØªØ± "API Setup"</li>
            <li>Ø§Ù†Ø³Ø® Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© Ø£Ø¯Ù†Ø§Ù‡</li>
          </ol>
        </div>
      </div>
      
      <div className="form-section">
        <div className="form-group">
          <label htmlFor="accessToken">
            Access Token *
            <span className="help-text">
              Ø§Ù„Ù…ÙØªØ§Ø­ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ Ù„Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ API
            </span>
          </label>
          <div className="input-with-toggle">
            <Input
              id="accessToken"
              type={showSecrets ? 'text' : 'password'}
              value={data.accessToken || ''}
              onChange={(e) => handleChange('accessToken', e.target.value)}
              placeholder="EAAxxxxxxxxxxxxxxxxxxxxx"
              error={errors.accessToken}
            />
            <Button
              type="button"
              variant="ghost"
              onClick={() => setShowSecrets(!showSecrets)}
            >
              {showSecrets ? <EyeOffIcon /> : <EyeIcon />}
            </Button>
          </div>
        </div>
        
        <div className="form-group">
          <label htmlFor="phoneNumberId">
            Phone Number ID *
            <span className="help-text">
              Ù…Ø¹Ø±Ù Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ ÙÙŠ WhatsApp API
            </span>
          </label>
          <Input
            id="phoneNumberId"
            value={data.phoneNumberId || ''}
            onChange={(e) => handleChange('phoneNumberId', e.target.value)}
            placeholder="123456789012345"
            error={errors.phoneNumberId}
          />
        </div>
        
        <div className="form-group">
          <label htmlFor="webhookVerifyToken">
            Webhook Verify Token *
            <span className="help-text">
              Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Webhook (Ø§Ø®ØªØ± Ø£ÙŠ Ù†Øµ ØªØ±ÙŠØ¯Ù‡)
            </span>
          </label>
          <Input
            id="webhookVerifyToken"
            value={data.webhookVerifyToken || ''}
            onChange={(e) => handleChange('webhookVerifyToken', e.target.value)}
            placeholder="my_secure_verify_token_123"
            error={errors.webhookVerifyToken}
          />
        </div>
      </div>
      
      <div className="security-warning">
        <Alert type="warning">
          <ShieldIcon />
          <div>
            <strong>Ø£Ù…Ø§Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:</strong>
            <p>Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø´ÙØ±Ø© Ø¨Ø£Ù…Ø§Ù† ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</p>
          </div>
        </Alert>
      </div>
    </div>
  );
}
```

---

#### **WhatsApp Test Step** - Ø®Ø·ÙˆØ© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±
```typescript
// src/components/integrations/wizard/steps/WhatsAppTestStep.tsx

export function WhatsAppTestStep({ data, onChange, validation }: WhatsAppTestStepProps) {
  const [testResults, setTestResults] = useState<TestResult[]>([]);
  const [isTesting, setIsTesting] = useState(false);
  const [testPhone, setTestPhone] = useState('');
  
  const runTests = async () => {
    setIsTesting(true);
    setTestResults([]);
    
    const tests = [
      {
        name: 'ÙØ­Øµ Ø§Ù„Ø§ØªØµØ§Ù„',
        test: () => testConnection(data),
      },
      {
        name: 'ÙØ­Øµ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª',
        test: () => testPermissions(data),
      },
      {
        name: 'ÙØ­Øµ Webhook',
        test: () => testWebhook(data),
      },
    ];
    
    for (const test of tests) {
      try {
        const result = await test.test();
        setTestResults(prev => [...prev, {
          name: test.name,
          status: 'success',
          message: result.message,
        }]);
      } catch (error) {
        setTestResults(prev => [...prev, {
          name: test.name,
          status: 'error',
          message: error.message,
        }]);
      }
    }
    
    setIsTesting(false);
  };
  
  const sendTestMessage = async () => {
    if (!testPhone) {
      showError('Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø±');
      return;
    }
    
    try {
      await sendWhatsAppMessage({
        to: testPhone,
        message: 'Ù…Ø±Ø­Ø¨Ø§Ù‹! Ù‡Ø°Ù‡ Ø±Ø³Ø§Ù„Ø© Ø§Ø®ØªØ¨Ø§Ø± Ù…Ù† Ù…Ø±ÙƒØ² Ø§Ù„Ù‡Ù…Ù… ğŸ¥',
        credentials: data,
      });
      
      showSuccess('ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø¨Ù†Ø¬Ø§Ø­!');
    } catch (error) {
      showError('ÙØ´Ù„ ÙÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø©: ' + error.message);
    }
  };
  
  return (
    <div className="whatsapp-test-step">
      <div className="step-intro">
        <h3>Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§ØªØµØ§Ù„ ğŸ§ª</h3>
        <p>ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù† ÙƒÙ„ Ø´ÙŠØ¡ ÙŠØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­</p>
      </div>
      
      <div className="test-section">
        <Button
          onClick={runTests}
          disabled={isTesting}
          className="test-button"
        >
          {isTesting ? (
            <>
              <LoaderIcon className="animate-spin" />
              Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±...
            </>
          ) : (
            <>
              <PlayIcon />
              Ø¨Ø¯Ø¡ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±
            </>
          )}
        </Button>
        
        {testResults.length > 0 && (
          <div className="test-results">
            {testResults.map((result, index) => (
              <div key={index} className={`test-result ${result.status}`}>
                <div className="result-icon">
                  {result.status === 'success' ? (
                    <CheckCircleIcon className="text-green-500" />
                  ) : (
                    <XCircleIcon className="text-red-500" />
                  )}
                </div>
                <div className="result-content">
                  <div className="result-name">{result.name}</div>
                  <div className="result-message">{result.message}</div>
                </div>
              </div>
            ))}
          </div>
        )}
      </div>
      
      <div className="test-message-section">
        <h4>Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø© Ø§Ø®ØªØ¨Ø§Ø±</h4>
        <p>Ø£Ø±Ø³Ù„ Ø±Ø³Ø§Ù„Ø© ØªØ¬Ø±ÙŠØ¨ÙŠØ© Ù„Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø¹Ù…Ù„ Ø§Ù„Ù†Ø¸Ø§Ù…</p>
        
        <div className="test-message-form">
          <Input
            label="Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø±"
            value={testPhone}
            onChange={(e) => setTestPhone(e.target.value)}
            placeholder="+966501234567"
          />
          <Button
            onClick={sendTestMessage}
            disabled={!testPhone || isTesting}
          >
            Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø© Ø§Ø®ØªØ¨Ø§Ø±
          </Button>
        </div>
      </div>
      
      <div className="success-message">
        <div className="success-icon">ğŸ‰</div>
        <h4>Ù…Ù…ØªØ§Ø²! ÙƒÙ„ Ø´ÙŠØ¡ Ø¬Ø§Ù‡Ø²</h4>
        <p>WhatsApp Business API Ù…Ø±Ø¨ÙˆØ· Ø¨Ù†Ø¬Ø§Ø­ Ù…Ø¹ Ø§Ù„Ù†Ø¸Ø§Ù…</p>
      </div>
    </div>
  );
}
```

---

### 2. **SMS Gateway Wizard** - ÙˆÙŠØ²Ø±Ø¯ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ù†ØµÙŠØ©

```typescript
// src/lib/integrations/wizards/sms-wizard.ts

export const smsWizardConfig: WizardConfig = {
  id: 'sms',
  name: 'SMS Gateway',
  description: 'Ø±Ø¨Ø· Ø®Ø¯Ù…Ø© Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ù†ØµÙŠØ© Ù„Ø¥Ø±Ø³Ø§Ù„ SMS',
  icon: 'ğŸ“±',
  category: 'communication',
  allowMultiple: true, // ÙŠØ³Ù…Ø­ Ø¨ØªÙƒØ§Ù…Ù„Ø§Øª Ù…ØªØ¹Ø¯Ø¯Ø©
  maxInstances: 3,
  steps: [
    {
      id: 'provider-selection',
      title: 'Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ø²ÙˆØ¯',
      description: 'Ø§Ø®ØªØ± Ù…Ø²ÙˆØ¯ Ø®Ø¯Ù…Ø© SMS',
      icon: 'ğŸ¢',
      component: SMSProviderStep,
      validation: [
        { field: 'provider', required: true, message: 'Ø§Ø®ØªØ± Ù…Ø²ÙˆØ¯ Ø§Ù„Ø®Ø¯Ù…Ø©' },
      ],
    },
    {
      id: 'credentials',
      title: 'Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø§Ø¹ØªÙ…Ø§Ø¯',
      description: 'Ø£Ø¯Ø®Ù„ Ø¨ÙŠØ§Ù†Ø§Øª API Ù…Ù† Ø§Ù„Ù…Ø²ÙˆØ¯',
      icon: 'ğŸ”‘',
      component: SMSCredentialsStep,
      validation: [
        { field: 'apiKey', required: true, message: 'API Key Ù…Ø·Ù„ÙˆØ¨' },
        { field: 'apiSecret', required: true, message: 'API Secret Ù…Ø·Ù„ÙˆØ¨' },
      ],
    },
    {
      id: 'sender-config',
      title: 'Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù…Ø±Ø³Ù„',
      description: 'Ù‚Ù… Ø¨Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ø³Ù… Ø§Ù„Ù…Ø±Ø³Ù„ ÙˆØ§Ù„Ø±Ù‚Ù…',
      icon: 'ğŸ“¤',
      component: SMSSenderStep,
      validation: [
        { field: 'senderName', required: true, message: 'Ø§Ø³Ù… Ø§Ù„Ù…Ø±Ø³Ù„ Ù…Ø·Ù„ÙˆØ¨' },
        { field: 'senderNumber', required: true, message: 'Ø±Ù‚Ù… Ø§Ù„Ù…Ø±Ø³Ù„ Ù…Ø·Ù„ÙˆØ¨' },
      ],
    },
    {
      id: 'test-sms',
      title: 'Ø§Ø®ØªØ¨Ø§Ø± SMS',
      description: 'Ø£Ø±Ø³Ù„ Ø±Ø³Ø§Ù„Ø© ØªØ¬Ø±ÙŠØ¨ÙŠØ©',
      icon: 'ğŸ§ª',
      component: SMSTestStep,
      validation: [],
    },
  ],
};
```

---

### 3. **Email Service Wizard** - ÙˆÙŠØ²Ø±Ø¯ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ

```typescript
// src/lib/integrations/wizards/email-wizard.ts

export const emailWizardConfig: WizardConfig = {
  id: 'email',
  name: 'Email Service',
  description: 'Ø±Ø¨Ø· Ø®Ø¯Ù…Ø© Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ',
  icon: 'ğŸ“§',
  category: 'communication',
  allowMultiple: true,
  maxInstances: 2,
  steps: [
    {
      id: 'email-provider',
      title: 'Ø§Ø®ØªÙŠØ§Ø± Ù…Ø²ÙˆØ¯ Ø§Ù„Ø¨Ø±ÙŠØ¯',
      description: 'Ø§Ø®ØªØ± Ù…Ø²ÙˆØ¯ Ø®Ø¯Ù…Ø© Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ',
      icon: 'ğŸ¢',
      component: EmailProviderStep,
      validation: [
        { field: 'provider', required: true, message: 'Ø§Ø®ØªØ± Ù…Ø²ÙˆØ¯ Ø§Ù„Ø¨Ø±ÙŠØ¯' },
      ],
    },
    {
      id: 'email-credentials',
      title: 'Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø§Ø¹ØªÙ…Ø§Ø¯',
      description: 'Ø£Ø¯Ø®Ù„ Ø¨ÙŠØ§Ù†Ø§Øª API',
      icon: 'ğŸ”‘',
      component: EmailCredentialsStep,
      validation: [
        { field: 'apiKey', required: true, message: 'API Key Ù…Ø·Ù„ÙˆØ¨' },
      ],
    },
    {
      id: 'email-settings',
      title: 'Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¨Ø±ÙŠØ¯',
      description: 'Ù‚Ù… Ø¨Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù…Ø±Ø³Ù„ ÙˆØ§Ù„Ù‚ÙˆØ§Ù„Ø¨',
      icon: 'âš™ï¸',
      component: EmailSettingsStep,
      validation: [
        { field: 'fromEmail', required: true, email: true, message: 'Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ù…Ø±Ø³Ù„ Ù…Ø·Ù„ÙˆØ¨' },
        { field: 'fromName', required: true, message: 'Ø§Ø³Ù… Ø§Ù„Ù…Ø±Ø³Ù„ Ù…Ø·Ù„ÙˆØ¨' },
      ],
    },
    {
      id: 'email-test',
      title: 'Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø¨Ø±ÙŠØ¯',
      description: 'Ø£Ø±Ø³Ù„ Ø¨Ø±ÙŠØ¯ ØªØ¬Ø±ÙŠØ¨ÙŠ',
      icon: 'ğŸ§ª',
      component: EmailTestStep,
      validation: [],
    },
  ],
};
```

---

## ğŸ¨ ÙˆØ§Ø¬Ù‡Ø© Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØªÙƒØ§Ù…Ù„Ø§Øª

### 1. **Integration Dashboard** - Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©

```typescript
// src/app/(admin)/integrations/page.tsx

export default function IntegrationsPage() {
  const [integrations, setIntegrations] = useState<Integration[]>([]);
  const [wizards, setWizards] = useState<WizardConfig[]>([]);
  
  return (
    <div className="integrations-page">
      <div className="page-header">
        <h1>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØªÙƒØ§Ù…Ù„Ø§Øª</h1>
        <p>Ø±Ø¨Ø· Ø§Ù„Ù†Ø¸Ø§Ù… Ù…Ø¹ Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠØ©</p>
      </div>
      
      {/* Quick Stats */}
      <div className="stats-grid">
        <StatCard
          title="Ø§Ù„ØªÙƒØ§Ù…Ù„Ø§Øª Ø§Ù„Ù†Ø´Ø·Ø©"
          value={integrations.filter(i => i.isActive).length}
          icon={<CheckCircleIcon />}
          color="green"
        />
        <StatCard
          title="Ø§Ù„ØªÙƒØ§Ù…Ù„Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø©"
          value={wizards.length}
          icon={<PlusIcon />}
          color="blue"
        />
        <StatCard
          title="Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ù…Ø±Ø³Ù„Ø© Ø§Ù„ÙŠÙˆÙ…"
          value={getTodayMessages()}
          icon={<MessageIcon />}
          color="purple"
        />
        <StatCard
          title="Ù…Ø¹Ø¯Ù„ Ø§Ù„Ù†Ø¬Ø§Ø­"
          value={`${getSuccessRate()}%`}
          icon={<TrendingUpIcon />}
          color="orange"
        />
      </div>
      
      {/* Integration Categories */}
      <div className="integration-categories">
        <h2>ÙØ¦Ø§Øª Ø§Ù„ØªÙƒØ§Ù…Ù„Ø§Øª</h2>
        
        <div className="categories-grid">
          <CategoryCard
            title="Ø§Ù„ØªÙˆØ§ØµÙ„"
            description="WhatsApp, SMS, Email"
            icon="ğŸ’¬"
            count={getCategoryCount('communication')}
            onClick={() => setActiveCategory('communication')}
          />
          <CategoryCard
            title="Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø§Øª"
            description="Stripe, Moyasar, PayPal"
            icon="ğŸ’³"
            count={getCategoryCount('payment')}
            onClick={() => setActiveCategory('payment')}
          />
          <CategoryCard
            title="Ø§Ù„Ø¬Ø¯ÙˆÙ„Ø©"
            description="Google Calendar, Outlook"
            icon="ğŸ“…"
            count={getCategoryCount('scheduling')}
            onClick={() => setActiveCategory('scheduling')}
          />
          <CategoryCard
            title="Ø§Ù„ØªØ­Ù„ÙŠÙ„Ø§Øª"
            description="Google Analytics, Mixpanel"
            icon="ğŸ“Š"
            count={getCategoryCount('analytics')}
            onClick={() => setActiveCategory('analytics')}
          />
        </div>
      </div>
      
      {/* Active Integrations */}
      <div className="active-integrations">
        <h2>Ø§Ù„ØªÙƒØ§Ù…Ù„Ø§Øª Ø§Ù„Ù†Ø´Ø·Ø©</h2>
        
        <div className="integrations-list">
          {integrations.map(integration => (
            <IntegrationCard
              key={integration.id}
              integration={integration}
              onEdit={() => editIntegration(integration.id)}
              onToggle={() => toggleIntegration(integration.id)}
              onDelete={() => deleteIntegration(integration.id)}
            />
          ))}
        </div>
      </div>
      
      {/* Add New Integration */}
      <div className="add-integration">
        <Button
          onClick={() => setShowWizardSelector(true)}
          className="add-button"
        >
          <PlusIcon />
          Ø¥Ø¶Ø§ÙØ© ØªÙƒØ§Ù…Ù„ Ø¬Ø¯ÙŠØ¯
        </Button>
      </div>
      
      {/* Wizard Selector Modal */}
      {showWizardSelector && (
        <WizardSelectorModal
          wizards={wizards}
          onSelect={(wizardId) => startWizard(wizardId)}
          onClose={() => setShowWizardSelector(false)}
        />
      )}
    </div>
  );
}
```

---

### 2. **Integration Card** - Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„ØªÙƒØ§Ù…Ù„

```typescript
// src/components/integrations/IntegrationCard.tsx

interface IntegrationCardProps {
  integration: Integration;
  onEdit: () => void;
  onToggle: () => void;
  onDelete: () => void;
}

export function IntegrationCard({ integration, onEdit, onToggle, onDelete }: IntegrationCardProps) {
  const [isLoading, setIsLoading] = useState(false);
  
  const handleToggle = async () => {
    setIsLoading(true);
    try {
      await toggleIntegration(integration.id);
      onToggle();
    } catch (error) {
      showError('ÙØ´Ù„ ÙÙŠ ØªØºÙŠÙŠØ± Ø§Ù„Ø­Ø§Ù„Ø©');
    } finally {
      setIsLoading(false);
    }
  };
  
  const handleTest = async () => {
    setIsLoading(true);
    try {
      const result = await testIntegration(integration.id);
      showSuccess('Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ù†Ø¬Ø­!');
    } catch (error) {
      showError('ÙØ´Ù„ ÙÙŠ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±: ' + error.message);
    } finally {
      setIsLoading(false);
    }
  };
  
  return (
    <Card className="integration-card">
      <div className="card-header">
        <div className="integration-info">
          <div className="integration-icon">
            <span className="text-2xl">{integration.icon}</span>
          </div>
          <div className="integration-details">
            <h3 className="integration-name">{integration.name}</h3>
            <p className="integration-description">{integration.description}</p>
            <div className="integration-meta">
              <span className="integration-type">{integration.type}</span>
              <span className="integration-status">
                <StatusBadge status={integration.status} />
              </span>
            </div>
          </div>
        </div>
        
        <div className="integration-actions">
          <Switch
            checked={integration.isActive}
            onCheckedChange={handleToggle}
            disabled={isLoading}
          />
        </div>
      </div>
      
      <div className="card-body">
        <div className="integration-stats">
          <div className="stat">
            <span className="stat-label">Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ù…Ø±Ø³Ù„Ø©</span>
            <span className="stat-value">{integration.messagesSent}</span>
          </div>
          <div className="stat">
            <span className="stat-label">Ù…Ø¹Ø¯Ù„ Ø§Ù„Ù†Ø¬Ø§Ø­</span>
            <span className="stat-value">{integration.successRate}%</span>
          </div>
          <div className="stat">
            <span className="stat-label">Ø¢Ø®Ø± Ø§Ø®ØªØ¨Ø§Ø±</span>
            <span className="stat-value">
              {formatDate(integration.lastTestAt)}
            </span>
          </div>
        </div>
        
        <div className="integration-health">
          <div className="health-indicator">
            <div className={`health-dot ${integration.healthStatus}`} />
            <span>ØµØ­Ø© Ø§Ù„Ø§ØªØµØ§Ù„: {integration.healthScore}%</span>
          </div>
        </div>
      </div>
      
      <div className="card-footer">
        <div className="action-buttons">
          <Button
            variant="outline"
            size="sm"
            onClick={handleTest}
            disabled={isLoading}
          >
            <TestTubeIcon />
            Ø§Ø®ØªØ¨Ø§Ø±
          </Button>
          <Button
            variant="outline"
            size="sm"
            onClick={onEdit}
          >
            <EditIcon />
            ØªØ¹Ø¯ÙŠÙ„
          </Button>
          <Button
            variant="outline"
            size="sm"
            onClick={onDelete}
            className="text-red-600"
          >
            <TrashIcon />
            Ø­Ø°Ù
          </Button>
        </div>
      </div>
    </Card>
  );
}
```

---

## ğŸ”§ Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØªÙƒÙˆÙŠÙ†Ø§Øª

### 1. **Configuration Manager** - Ù…Ø¯ÙŠØ± Ø§Ù„ØªÙƒÙˆÙŠÙ†Ø§Øª

```typescript
// src/lib/integrations/configuration-manager.ts

export class ConfigurationManager {
  private configs: Map<string, IntegrationConfig> = new Map();
  
  async loadConfigurations(): Promise<void> {
    const { data } = await supabase
      .from('integration_configs')
      .select('*')
      .eq('is_active', true);
    
    data?.forEach(config => {
      this.configs.set(config.id, config);
    });
  }
  
  getConfig(integrationId: string): IntegrationConfig | undefined {
    return this.configs.get(integrationId);
  }
  
  async saveConfig(config: IntegrationConfig): Promise<void> {
    // Encrypt sensitive data
    const encryptedConfig = await this.encryptConfig(config);
    
    const { error } = await supabase
      .from('integration_configs')
      .upsert({
        ...config,
        config: encryptedConfig,
        updated_at: new Date().toISOString(),
      });
    
    if (error) throw error;
    
    this.configs.set(config.id, config);
  }
  
  async testConfig(config: IntegrationConfig): Promise<TestResult> {
    const adapter = this.getAdapter(config.type);
    return await adapter.testConnection(config);
  }
  
  private async encryptConfig(config: IntegrationConfig): Promise<any> {
    // Use proper encryption (not Base64!)
    const encryptionKey = await this.getEncryptionKey();
    return await encrypt(JSON.stringify(config.config), encryptionKey);
  }
  
  private async decryptConfig(encryptedConfig: any): Promise<any> {
    const encryptionKey = await this.getEncryptionKey();
    return JSON.parse(await decrypt(encryptedConfig, encryptionKey));
  }
}
```

---

### 2. **Adapter Factory** - Ù…ØµÙ†Ø¹ Ø§Ù„Ù…Ø­ÙˆÙ„Ø§Øª

```typescript
// src/lib/integrations/adapter-factory.ts

export class AdapterFactory {
  private adapters: Map<string, new (config: any) => IntegrationAdapter> = new Map();
  
  registerAdapter(type: string, adapterClass: new (config: any) => IntegrationAdapter): void {
    this.adapters.set(type, adapterClass);
  }
  
  createAdapter(type: string, config: any): IntegrationAdapter {
    const AdapterClass = this.adapters.get(type);
    if (!AdapterClass) {
      throw new Error(`Adapter not found for type: ${type}`);
    }
    
    return new AdapterClass(config);
  }
  
  getSupportedTypes(): string[] {
    return Array.from(this.adapters.keys());
  }
}

// Register all adapters
const adapterFactory = new AdapterFactory();

adapterFactory.registerAdapter('whatsapp', WhatsAppAdapter);
adapterFactory.registerAdapter('sms_twilio', TwilioSMSAdapter);
adapterFactory.registerAdapter('sms_moyasar', MoyasarSMSAdapter);
adapterFactory.registerAdapter('email_sendgrid', SendGridEmailAdapter);
adapterFactory.registerAdapter('email_ses', SESEmailAdapter);
adapterFactory.registerAdapter('calendar_google', GoogleCalendarAdapter);
adapterFactory.registerAdapter('calendar_outlook', OutlookCalendarAdapter);
adapterFactory.registerAdapter('analytics_google', GoogleAnalyticsAdapter);
adapterFactory.registerAdapter('analytics_mixpanel', MixpanelAdapter);
```

---

## ğŸ“Š Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø£Ø¯Ø§Ø¡ ÙˆØ§Ù„ØªØ­Ù„ÙŠÙ„Ø§Øª

### 1. **Integration Analytics** - ØªØ­Ù„ÙŠÙ„Ø§Øª Ø§Ù„ØªÙƒØ§Ù…Ù„Ø§Øª

```typescript
// src/lib/integrations/analytics.ts

export class IntegrationAnalytics {
  async getIntegrationStats(integrationId: string, period: string): Promise<IntegrationStats> {
    const { data } = await supabase
      .from('integration_logs')
      .select('*')
      .eq('integration_id', integrationId)
      .gte('created_at', this.getPeriodStart(period));
    
    return {
      totalRequests: data.length,
      successfulRequests: data.filter(log => log.status === 'success').length,
      failedRequests: data.filter(log => log.status === 'failed').length,
      averageResponseTime: this.calculateAverageResponseTime(data),
      successRate: this.calculateSuccessRate(data),
      errorBreakdown: this.getErrorBreakdown(data),
      hourlyDistribution: this.getHourlyDistribution(data),
    };
  }
  
  async getProviderComparison(): Promise<ProviderComparison[]> {
    const providers = await this.getAllProviders();
    
    return providers.map(provider => ({
      name: provider.name,
      type: provider.type,
      successRate: provider.successRate,
      averageResponseTime: provider.averageResponseTime,
      totalRequests: provider.totalRequests,
      cost: provider.estimatedCost,
    }));
  }
  
  async getUsageTrends(period: string): Promise<UsageTrend[]> {
    // Implementation for usage trends
  }
}
```

---

### 2. **Real-time Monitoring** - Ø§Ù„Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„ÙÙˆØ±ÙŠØ©

```typescript
// src/components/integrations/IntegrationMonitor.tsx

export function IntegrationMonitor() {
  const [integrations, setIntegrations] = useState<Integration[]>([]);
  const [alerts, setAlerts] = useState<Alert[]>([]);
  
  useEffect(() => {
    // Real-time updates
    const interval = setInterval(async () => {
      await updateIntegrationStatus();
      await checkForAlerts();
    }, 30000); // Every 30 seconds
    
    return () => clearInterval(interval);
  }, []);
  
  return (
    <div className="integration-monitor">
      <h2>Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„ØªÙƒØ§Ù…Ù„Ø§Øª</h2>
      
      {/* Health Status */}
      <div className="health-grid">
        {integrations.map(integration => (
          <HealthCard
            key={integration.id}
            integration={integration}
            onAlert={(alert) => setAlerts(prev => [...prev, alert])}
          />
        ))}
      </div>
      
      {/* Alerts */}
      {alerts.length > 0 && (
        <div className="alerts-section">
          <h3>Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª</h3>
          {alerts.map(alert => (
            <AlertCard
              key={alert.id}
              alert={alert}
              onDismiss={() => dismissAlert(alert.id)}
            />
          ))}
        </div>
      )}
    </div>
  );
}
```

---

## ğŸš€ Ø®Ø·Ø© Ø§Ù„ØªÙ†ÙÙŠØ°

### Ø§Ù„Ù…Ø±Ø­Ù„Ø© 1: Ø§Ù„Ø¨Ù†ÙŠØ© Ø§Ù„ØªØ­ØªÙŠØ© (Ø£Ø³Ø¨ÙˆØ¹ 1-2)
- [ ] Ø¥Ù†Ø´Ø§Ø¡ Wizard Engine
- [ ] Ø¨Ù†Ø§Ø¡ Ù…ÙƒÙˆÙ†Ø§Øª Ø§Ù„ÙˆÙŠØ²Ø±Ø¯ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
- [ ] Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØªÙƒÙˆÙŠÙ†Ø§Øª
- [ ] Adapter Factory

### Ø§Ù„Ù…Ø±Ø­Ù„Ø© 2: Ø§Ù„ØªÙƒØ§Ù…Ù„Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© (Ø£Ø³Ø¨ÙˆØ¹ 3-4)
- [ ] WhatsApp Wizard
- [ ] SMS Wizard (Twilio)
- [ ] Email Wizard (SendGrid)
- [ ] ÙˆØ§Ø¬Ù‡Ø© Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØªÙƒØ§Ù…Ù„Ø§Øª

### Ø§Ù„Ù…Ø±Ø­Ù„Ø© 3: Ø§Ù„ØªÙƒØ§Ù…Ù„Ø§Øª Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø© (Ø£Ø³Ø¨ÙˆØ¹ 5-6)
- [ ] Google Calendar Wizard
- [ ] Analytics Wizards
- [ ] Payment Wizards
- [ ] Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø£Ø¯Ø§Ø¡

### Ø§Ù„Ù…Ø±Ø­Ù„Ø© 4: Ø§Ù„ØªØ­Ø³ÙŠÙ†Ø§Øª (Ø£Ø³Ø¨ÙˆØ¹ 7-8)
- [ ] AI-powered suggestions
- [ ] Advanced testing
- [ ] Performance optimization
- [ ] Mobile optimization

**Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹: 8 Ø£Ø³Ø§Ø¨ÙŠØ¹**

---

## ğŸ’° Ø§Ù„ØªÙƒÙ„ÙØ© Ø§Ù„Ù…ØªÙˆÙ‚Ø¹Ø©

| Ø§Ù„Ø¨Ù†Ø¯ | Ø§Ù„ØªÙƒÙ„ÙØ© Ø§Ù„Ø´Ù‡Ø±ÙŠØ© |
|------|-----------------|
| WhatsApp Business API | $0-50 |
| Twilio SMS | $20-100 |
| SendGrid Email | $15-50 |
| Google Calendar API | $0 |
| Analytics APIs | $0-30 |
| **Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹** | **$35-230/Ø´Ù‡Ø±** |

---

## ğŸ¯ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ù…ØªÙˆÙ‚Ø¹Ø©

### Ø¨Ø¹Ø¯ Ø§Ù„ØªÙ†ÙÙŠØ° Ø§Ù„ÙƒØ§Ù…Ù„:
- âœ… **Ø³Ù‡ÙˆÙ„Ø© Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯**: Ù…Ù† 30 Ø¯Ù‚ÙŠÙ‚Ø© Ø¥Ù„Ù‰ 5 Ø¯Ù‚Ø§Ø¦Ù‚
- âœ… **ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡**: Ù…Ù† 25% Ø¥Ù„Ù‰ Ø£Ù‚Ù„ Ù…Ù† 5%
- âœ… **Ø±Ø¶Ø§ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†**: 95%+
- âœ… **Ø£ØªÙ…ØªØ© 90%** Ù…Ù† Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯
- âœ… **ØªØ¬Ø±Ø¨Ø© Ù…Ø³ØªØ®Ø¯Ù… Ù…Ù…ØªØ¹Ø©** ÙˆÙ…Ø­ÙØ²Ø©

---

*ØªÙ… Ø¥Ø¹Ø¯Ø§Ø¯ Ù‡Ø°Ø§ Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø¨ØªØ§Ø±ÙŠØ®: 2025-01-17*  
*Ø§Ù„Ø­Ø§Ù„Ø©: Ø¬Ø§Ù‡Ø² Ù„Ù„ØªÙ†ÙÙŠØ° Ø§Ù„ÙÙˆØ±ÙŠ*  
*Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©: ğŸ”´ Ø¹Ø§Ù„ÙŠØ©*

