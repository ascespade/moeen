# ğŸ”— Ø®Ø±ÙŠØ·Ø© Ø§Ù„Ø¹Ù„Ø§Ù‚Ø§Øª Ø¨ÙŠÙ† Ø§Ù„ÙˆØ­Ø¯Ø§Øª

## Module Dependencies Map - Ù…ÙØ¹ÙŠÙ†

**Ø§Ù„ØªØ§Ø±ÙŠØ®:** 17 Ø£ÙƒØªÙˆØ¨Ø± 2025

---

## ğŸ“Š Ø§Ù„Ø¹Ù„Ø§Ù‚Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©

### Core Flow (Ø§Ù„ØªØ¯ÙÙ‚ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ)

```
Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
   â†“
ğŸ” Authentication (Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©)
   â†“
ğŸ‘¨â€ğŸ’¼ User Dashboard (Ø­Ø³Ø¨ Ø§Ù„Ø¯ÙˆØ±)
   â†“
ğŸ“… Appointments / ğŸ¤– Chatbot / ğŸ‘¥ CRM / ğŸ’¬ Conversations
```

---

## ğŸ¯ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¹Ù„Ø§Ù‚Ø§Øª Ø¨ÙŠÙ† Ø§Ù„ÙˆØ­Ø¯Ø§Øª

### 1. Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© â†’ Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙˆØ­Ø¯Ø§Øª

```
ğŸ” Authentication & Security
â”œâ”€â”€â†’ ğŸ‘¨â€ğŸ’¼ Admin Module (Ø¥Ø¯Ø§Ø±Ø©)
â”œâ”€â”€â†’ ğŸ“… Appointments (Ø§Ù„Ù…ÙˆØ§Ø¹ÙŠØ¯)
â”œâ”€â”€â†’ ğŸ¤– Chatbot & AI (Ø§Ù„Ø´Ø§Øª Ø¨ÙˆØª)
â”œâ”€â”€â†’ ğŸ‘¥ CRM (Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡)
â”œâ”€â”€â†’ ğŸ’¬ Conversations (Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø§Øª)
â”œâ”€â”€â†’ ğŸ“‹ Medical Records (Ø§Ù„Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ø·Ø¨ÙŠØ©)
â”œâ”€â”€â†’ ğŸ“Š Analytics (Ø§Ù„ØªØ­Ù„ÙŠÙ„Ø§Øª)
â””â”€â”€â†’ ğŸ”” Notifications (Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª)
```

### 2. Ø§Ù„Ù…ÙˆØ§Ø¹ÙŠØ¯ â†’ ÙˆØ­Ø¯Ø§Øª Ù…ØªØ¹Ø¯Ø¯Ø©

```
ğŸ“… Appointments Management
â”œâ”€â”€â†’ ğŸ“‹ Patients (Ø§Ù„Ù…Ø±Ø¶Ù‰)
â”œâ”€â”€â†’ ğŸ‘¨â€âš•ï¸ Doctors (Ø§Ù„Ø£Ø·Ø¨Ø§Ø¡)
â”œâ”€â”€â†’ ğŸ¥ Insurance Claims (Ø§Ù„ØªØ£Ù…ÙŠÙ†)
â”œâ”€â”€â†’ ğŸ’³ Payments (Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø§Øª)
â”œâ”€â”€â†’ ğŸ”” Notifications (Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ù…ÙˆØ¹Ø¯)
â””â”€â”€â†’ ğŸ“Š Analytics (Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù…ÙˆØ§Ø¹ÙŠØ¯)
```

### 3. Ø§Ù„Ø´Ø§Øª Ø¨ÙˆØª â†’ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ ÙˆØ§Ù„Ù…Ø­Ø§Ø¯Ø«Ø§Øª

```
ğŸ¤– Chatbot & AI
â”œâ”€â”€â†’ ğŸ’¬ Conversations (Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø§Øª)
â”œâ”€â”€â†’ ğŸ’¬ Messages (Ø§Ù„Ø±Ø³Ø§Ø¦Ù„)
â”œâ”€â”€â†’ ğŸ§  AI Models (Ù†Ù…Ø§Ø°Ø¬ Ø§Ù„Ø°ÙƒØ§Ø¡)
â”œâ”€â”€â†’ ğŸ“… Appointments (Ø­Ø¬Ø² ØªÙ„Ù‚Ø§Ø¦ÙŠ)
â”œâ”€â”€â†’ ğŸ”” Notifications (ØªØ°ÙƒÙŠØ±Ø§Øª)
â””â”€â”€â†’ ğŸ“Š Analytics (ØªØªØ¨Ø¹ Ø§Ù„Ø£Ø¯Ø§Ø¡)
```

### 4. CRM â†’ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡

```
ğŸ‘¥ CRM Module
â”œâ”€â”€â†’ ğŸ™‹ Customers (Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡)
â”œâ”€â”€â†’ ğŸ“‹ Patients (Ø§Ù„Ù…Ø±Ø¶Ù‰/Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡)
â”œâ”€â”€â†’ ğŸ’¬ Conversations (ØªÙØ§Ø¹Ù„Ø§Øª)
â”œâ”€â”€â†’ ğŸ“ Activities (Ø§Ù„Ø£Ù†Ø´Ø·Ø©)
â”œâ”€â”€â†’ ğŸ’° Deals (Ø§Ù„ØµÙÙ‚Ø§Øª)
â”œâ”€â”€â†’ ğŸ“Š Analytics (ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡)
â””â”€â”€â†’ ğŸ”” Notifications (ØªÙ†Ø¨ÙŠÙ‡Ø§Øª)
```

### 5. Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø§Øª â†’ Ø§Ù„Ù‚Ù†ÙˆØ§Øª Ø§Ù„Ù…ØªØ¹Ø¯Ø¯Ø©

```
ğŸ’¬ Conversations & Messaging
â”œâ”€â”€â†’ ğŸ“± WhatsApp (ÙˆØ§ØªØ³Ø§Ø¨)
â”œâ”€â”€â†’ ğŸ“± Telegram (ØªÙŠÙ„ÙŠØ¬Ø±Ø§Ù…)
â”œâ”€â”€â†’ ğŸ“± Facebook (ÙÙŠØ³Ø¨ÙˆÙƒ)
â”œâ”€â”€â†’ ğŸ“± Instagram (Ø¥Ù†Ø³ØªØ¬Ø±Ø§Ù…)
â”œâ”€â”€â†’ ğŸ“§ Email (Ø¨Ø±ÙŠØ¯ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ)
â”œâ”€â”€â†’ ğŸ¤– AI Responses (Ø±Ø¯ÙˆØ¯ ØªÙ„Ù‚Ø§Ø¦ÙŠØ©)
â”œâ”€â”€â†’ ğŸ“ Attachments (Ù…Ø±ÙÙ‚Ø§Øª)
â””â”€â”€â†’ ğŸ“Š Analytics (ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø§Øª)
```

### 6. Ø§Ù„ØªØ­Ù„ÙŠÙ„Ø§Øª â† Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙˆØ­Ø¯Ø§Øª

```
ğŸ“Š Analytics & Reporting
â†‘
â”œâ”€â”€ ğŸ” Auth (ØªØ³Ø¬ÙŠÙ„Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„)
â”œâ”€â”€ ğŸ“… Appointments (Ø§Ù„Ù…ÙˆØ§Ø¹ÙŠØ¯)
â”œâ”€â”€ ğŸ¤– Chatbot (Ø£Ø¯Ø§Ø¡ Ø§Ù„Ø¨ÙˆØª)
â”œâ”€â”€ ğŸ‘¥ CRM (Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡)
â”œâ”€â”€ ğŸ’¬ Conversations (Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø§Øª)
â”œâ”€â”€ ğŸ¥ Insurance (Ø§Ù„Ù…Ø·Ø§Ù„Ø¨Ø§Øª)
â”œâ”€â”€ ğŸ’³ Payments (Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø§Øª)
â””â”€â”€ ğŸ“‹ Medical Records (Ø§Ù„Ø³Ø¬Ù„Ø§Øª)
```

### 7. Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª â† Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙˆØ­Ø¯Ø§Øª

```
ğŸ”” Notifications
â†‘
â”œâ”€â”€ ğŸ“… Appointments (ØªØ°ÙƒÙŠØ±Ø§Øª Ø§Ù„Ù…ÙˆØ§Ø¹ÙŠØ¯)
â”œâ”€â”€ ğŸ¤– Chatbot (Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø¨ÙˆØª)
â”œâ”€â”€ ğŸ‘¥ CRM (ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡)
â”œâ”€â”€ ğŸ’¬ Conversations (Ø±Ø³Ø§Ø¦Ù„ Ø¬Ø¯ÙŠØ¯Ø©)
â”œâ”€â”€ ğŸ¥ Insurance (Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø·Ø§Ù„Ø¨Ø©)
â”œâ”€â”€ ğŸ’³ Payments (ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø¯ÙØ¹)
â””â”€â”€ ğŸ” Auth (Ø£Ù…Ø§Ù† Ø§Ù„Ø­Ø³Ø§Ø¨)
```

### 8. Ø³Ø¬Ù„Ø§Øª Ø§Ù„ØªØ¯Ù‚ÙŠÙ‚ â† Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙˆØ­Ø¯Ø§Øª

```
ğŸ—‚ï¸ Audit Logs (Ø³Ø¬Ù„Ø§Øª Ø§Ù„ØªØ¯Ù‚ÙŠÙ‚)
â†‘
â”œâ”€â”€ ğŸ” Auth (ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„/Ø®Ø±ÙˆØ¬)
â”œâ”€â”€ ğŸ‘¨â€ğŸ’¼ Admin (ØªØºÙŠÙŠØ±Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†)
â”œâ”€â”€ ğŸ“… Appointments (Ø¥Ù†Ø´Ø§Ø¡/ØªØ¹Ø¯ÙŠÙ„)
â”œâ”€â”€ ğŸ‘¥ CRM (ØªØ­Ø¯ÙŠØ«Ø§Øª Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡)
â”œâ”€â”€ ğŸ’³ Payments (Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª)
â”œâ”€â”€ ğŸ¥ Insurance (Ø§Ù„Ù…Ø·Ø§Ù„Ø¨Ø§Øª)
â””â”€â”€ âš™ï¸ Settings (ØªØºÙŠÙŠØ± Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª)
```

---

## ğŸ”„ Ø§Ù„ØªØ¯ÙÙ‚Ø§Øª Ø§Ù„Ø´Ø§Ø¦Ø¹Ø© (Common Flows)

### Flow 1: ØªØ³Ø¬ÙŠÙ„ Ù…Ø³ØªØ®Ø¯Ù… Ø¬Ø¯ÙŠØ¯

```
1. ğŸŒ User visits /register
2. ğŸ“ Fills registration form
3. â¡ï¸  POST /api/auth/register
4. âœ… User created in users table
5. ğŸ“§ Confirmation email sent
6. ğŸ—‚ï¸ Audit log created (user_registered)
7. ğŸ” Auto login
8. ğŸ  Redirect to dashboard (role-based)
```

### Flow 2: Ø­Ø¬Ø² Ù…ÙˆØ¹Ø¯ Ø¹Ø¨Ø± Ø§Ù„Ø´Ø§Øª Ø¨ÙˆØª

```
1. ğŸ’¬ User sends WhatsApp message
2. ğŸ¤– Chatbot receives via webhook
3. ğŸ§  AI processes intent
4. ğŸ“… Chatbot asks for date/time
5. ğŸ‘¨â€âš•ï¸ Chatbot shows available doctors
6. âœ… User confirms booking
7. ğŸ’¾ Appointment saved in DB
8. ğŸ”” Confirmation notification sent
9. ğŸ“§ Email/SMS reminder scheduled
10. ğŸ“Š Analytics updated
```

### Flow 3: ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ ÙˆÙ…Ø´Ø§Ù‡Ø¯Ø© Ø§Ù„Ù…ÙˆØ§Ø¹ÙŠØ¯

```
1. ğŸŒ User visits /login
2. ğŸ” POST /api/auth/login
3. âœ… Authentication successful
4. ğŸª Session cookie set
5. ğŸ—‚ï¸ Audit log (user_login)
6. ğŸ  Redirect to /dashboard/[role]
7. ğŸ“… Fetch appointments
8. ğŸ“Š Fetch analytics
9. ğŸ”” Fetch notifications
10. ğŸ–¼ï¸  Display dashboard
```

### Flow 4: Ù…Ø¹Ø§Ù„Ø¬Ø© Ù…Ø·Ø§Ù„Ø¨Ø© ØªØ£Ù…ÙŠÙ†

```
1. ğŸ‘¨â€ğŸ’¼ Staff creates claim
2. ğŸ’¾ POST /api/insurance/claims
3. ğŸ“‹ Links to patient & appointment
4. ğŸ“„ Upload documents
5. ğŸ¥ Submit to insurance provider
6. â³ Status: pending
7. ğŸ”” Notification to admin
8. ğŸ“Š Analytics updated
9. âœ… Approval received
10. ğŸ’³ Payment processed
```

### Flow 5: ØªØ­Ù„ÙŠÙ„ Ø£Ø¯Ø§Ø¡ Ø§Ù„Ù†Ø¸Ø§Ù…

```
1. ğŸ‘¨â€ğŸ’¼ Admin visits /admin/analytics
2. ğŸ“Š GET /api/analytics/metrics
3. ğŸ“… Fetch appointment stats
4. ğŸ’¬ Fetch conversation stats
5. ğŸ¤– Fetch chatbot performance
6. ğŸ‘¥ Fetch CRM metrics
7. ğŸ“ˆ Generate charts
8. ğŸ“„ Export report option
9. ğŸ–¼ï¸  Display dashboard
```

---

## ğŸ” Ø§Ø¹ØªÙ…Ø§Ø¯ÙŠØ§Øª Ø§Ù„Ø£Ù…Ø§Ù† (Security Dependencies)

### Authentication Chain

```
Request
  â†“
Middleware
  â”œâ”€ CORS Check
  â”œâ”€ Rate Limiting
  â””â”€ Security Headers
     â†“
Authentication
  â”œâ”€ JWT Validation
  â”œâ”€ Session Check
  â””â”€ User Lookup
     â†“
Authorization
  â”œâ”€ Role Check
  â”œâ”€ Permission Check
  â””â”€ Resource Access
     â†“
Audit Logging
  â”œâ”€ Log Action
  â”œâ”€ IP Tracking
  â””â”€ User Agent
     â†“
Response
```

---

## ğŸ“Š Ø§Ø¹ØªÙ…Ø§Ø¯ÙŠØ§Øª Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª

### Primary Tables & Foreign Keys

```
users (30 records)
  â”œâ†’ user_roles
  â”œâ†’ user_preferences
  â”œâ†’ conversations (created_by, assigned_to)
  â”œâ†’ messages (sender_id)
  â”œâ†’ appointments (via doctors)
  â”œâ†’ audit_logs (user_id)
  â””â†’ notifications (user_id)

patients (8 records)
  â”œâ†’ appointments (patient_id)
  â”œâ†’ sessions (patient_id)
  â”œâ†’ insurance_claims (patient_id)
  â””â†’ crm_deals (contact_id)

doctors (24 records)
  â”œâ†’ users (user_id)
  â”œâ†’ appointments (doctor_id)
  â”œâ†’ sessions (doctor_id)
  â””â†’ chatbot_appointments (doctor_id)

appointments (33 records)
  â”œâ†’ patients (patient_id)
  â”œâ†’ doctors (doctor_id)
  â”œâ†’ sessions (appointment_id)
  â””â†’ insurance_claims (appointment_id)

conversations (6 records)
  â”œâ†’ users (user_id, assigned_to)
  â”œâ†’ customers (customer_id)
  â”œâ†’ messages (conversation_id)
  â”œâ†’ reviews (conversation_id)
  â””â†’ analytics (conversation_id)
```

---

## ğŸ¯ Ø§Ù„ØªÙˆØµÙŠØ§Øª Ù„Ù„ØªØ·ÙˆÙŠØ±

### 1. ØªØ­Ø³ÙŠÙ† Ø§Ù„ØªÙƒØ§Ù…Ù„ Ø¨ÙŠÙ† Ø§Ù„ÙˆØ­Ø¯Ø§Øª

- âœ… Ø¥Ø¶Ø§ÙØ© event bus Ù„Ù„ØªÙˆØ§ØµÙ„ Ø¨ÙŠÙ† Ø§Ù„ÙˆØ­Ø¯Ø§Øª
- âœ… Ø§Ø³ØªØ®Ø¯Ø§Ù… Supabase Realtime Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª ÙÙˆØ±ÙŠØ©
- âœ… ØªØ·Ø¨ÙŠÙ‚ microservices architecture Ù„ÙˆØ­Ø¯Ø§Øª ÙƒØ¨ÙŠØ±Ø©

### 2. ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø£Ø¯Ø§Ø¡

- âœ… Ø¥Ø¶Ø§ÙØ© caching layer (Redis)
- âœ… ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù…Ø§Øª (Query Optimization)
- âœ… Ø¥Ø¶Ø§ÙØ© pagination Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù‚ÙˆØ§Ø¦Ù…

### 3. ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø£Ù…Ø§Ù†

- âœ… Ø¥Ø¶Ø§ÙØ© 2FA Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
- âœ… ØªØ´ÙÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø³Ø§Ø³Ø©
- âœ… Ù…Ø±Ø§Ø¬Ø¹Ø© Ø¯ÙˆØ±ÙŠØ© Ù„Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª

---

## âœ… Ø§Ù„Ø®Ù„Ø§ØµØ©

**Ø§Ù„Ù†Ø¸Ø§Ù… Ù…ÙÙ†Ø¸Ù… Ø¨Ø´ÙƒÙ„ Ø§Ø­ØªØ±Ø§ÙÙŠ Ù…Ø¹:**

- 13 ÙˆØ­Ø¯Ø© Ø±Ø¦ÙŠØ³ÙŠØ© Ù…ØªÙƒØ§Ù…Ù„Ø©
- Ø¹Ù„Ø§Ù‚Ø§Øª ÙˆØ§Ø¶Ø­Ø© ÙˆÙ…Ù†Ø·Ù‚ÙŠØ©
- ØªØ¯ÙÙ‚Ø§Øª Ù…Ø­Ø¯Ø¯Ø© ÙˆÙ…ÙÙˆØ«Ù‚Ø©
- Ø£Ù…Ø§Ù† Ù…ØªØ¹Ø¯Ø¯ Ø§Ù„Ø·Ø¨Ù‚Ø§Øª
- Ù‚Ø§Ø¨Ù„ÙŠØ© Ù„Ù„ØªÙˆØ³Ø¹

**Ø§Ù„Ø­Ø§Ù„Ø©:** âœ… Ø¨Ù†ÙŠØ© Ù‚ÙˆÙŠØ© - Ø¬Ø§Ù‡Ø² Ù„Ù„Ø¥Ù†ØªØ§Ø¬ ğŸš€

---

_ØªÙ… Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡: 17 Ø£ÙƒØªÙˆØ¨Ø± 2025_  
_Ø§Ù„Ù†Ø³Ø®Ø©: 1.0_
