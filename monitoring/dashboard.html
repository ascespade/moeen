<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🚀 Cursor Dev Platform - Dashboard</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Cairo', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        .header h1 {
            font-size: 2.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .header p {
            color: #666;
            font-size: 1.1rem;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 30px 60px rgba(0, 0, 0, 0.15);
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(135deg, #667eea, #764ba2);
        }

        .stat-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
        }

        .stat-icon {
            width: 60px;
            height: 60px;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: white;
        }

        .stat-icon.cpu { background: linear-gradient(135deg, #ff6b6b, #ee5a24); }
        .stat-icon.memory { background: linear-gradient(135deg, #4ecdc4, #44a08d); }
        .stat-icon.disk { background: linear-gradient(135deg, #45b7d1, #96c93d); }
        .stat-icon.network { background: linear-gradient(135deg, #f093fb, #f5576c); }
        .stat-icon.services { background: linear-gradient(135deg, #4facfe, #00f2fe); }
        .stat-icon.security { background: linear-gradient(135deg, #43e97b, #38f9d7); }

        .stat-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: #333;
        }

        .stat-value {
            font-size: 2.5rem;
            font-weight: 700;
            color: #667eea;
            margin-bottom: 10px;
        }

        .stat-description {
            color: #666;
            font-size: 0.9rem;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e0e0e0;
            border-radius: 4px;
            overflow: hidden;
            margin: 15px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 4px;
            transition: width 0.3s ease;
        }

        .services-list {
            list-style: none;
        }

        .service-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid #eee;
        }

        .service-item:last-child {
            border-bottom: none;
        }

        .service-status {
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .service-status.running {
            background: #d4edda;
            color: #155724;
        }

        .service-status.stopped {
            background: #f8d7da;
            color: #721c24;
        }

        .logs-section {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }

        .logs-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
        }

        .logs-container {
            background: #1a1a1a;
            border-radius: 10px;
            padding: 20px;
            height: 400px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            color: #00ff00;
        }

        .log-entry {
            margin-bottom: 5px;
            padding: 5px;
            border-radius: 3px;
        }

        .log-entry.info { color: #00ff00; }
        .log-entry.warn { color: #ffff00; }
        .log-entry.error { color: #ff0000; }

        .controls {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            margin-bottom: 30px;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .btn-success {
            background: linear-gradient(135deg, #56ab2f, #a8e6cf);
            color: white;
        }

        .btn-warning {
            background: linear-gradient(135deg, #f093fb, #f5576c);
            color: white;
        }

        .btn-danger {
            background: linear-gradient(135deg, #ff6b6b, #ee5a24);
            color: white;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }

        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-left: 10px;
        }

        .status-indicator.online {
            background: #28a745;
            box-shadow: 0 0 10px #28a745;
        }

        .status-indicator.offline {
            background: #dc3545;
            box-shadow: 0 0 10px #dc3545;
        }

        .chart-container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }

        .chart {
            height: 300px;
            display: flex;
            align-items: end;
            justify-content: space-between;
            padding: 20px 0;
            border-bottom: 2px solid #eee;
            position: relative;
        }

        .chart-bar {
            width: 30px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 4px 4px 0 0;
            margin: 0 2px;
            transition: all 0.3s ease;
            position: relative;
        }

        .chart-bar:hover {
            background: linear-gradient(135deg, #764ba2, #667eea);
        }

        .footer {
            text-align: center;
            padding: 30px;
            color: rgba(255, 255, 255, 0.8);
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .controls {
                justify-content: center;
            }
        }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .alert {
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .alert-success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .alert-warning {
            background: #fff3cd;
            color: #856404;
            border: 1px solid #ffeaa7;
        }

        .alert-danger {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1><i class="fas fa-rocket"></i> Cursor Dev Platform</h1>
            <p>لوحة المراقبة والتحكم المتقدمة</p>
            <div class="status-indicator online" id="connectionStatus"></div>
            <span id="connectionText">متصل</span>
        </div>

        <!-- Controls -->
        <div class="controls">
            <button class="btn btn-primary" onclick="refreshData()">
                <i class="fas fa-sync-alt"></i> تحديث البيانات
            </button>
            <button class="btn btn-success" onclick="startBackup()">
                <i class="fas fa-download"></i> نسخ احتياطي
            </button>
            <button class="btn btn-warning" onclick="restartServices()">
                <i class="fas fa-redo"></i> إعادة تشغيل الخدمات
            </button>
            <a href="#" class="btn btn-primary" onclick="openCodeServer()">
                <i class="fas fa-code"></i> فتح Code Server
            </a>
        </div>

        <!-- Stats Grid -->
        <div class="stats-grid">
            <!-- CPU Usage -->
            <div class="stat-card">
                <div class="stat-header">
                    <div class="stat-title">استخدام المعالج</div>
                    <div class="stat-icon cpu">
                        <i class="fas fa-microchip"></i>
                    </div>
                </div>
                <div class="stat-value" id="cpuUsage">--</div>
                <div class="progress-bar">
                    <div class="progress-fill" id="cpuProgress" style="width: 0%"></div>
                </div>
                <div class="stat-description">متوسط الاستخدام في آخر دقيقة</div>
            </div>

            <!-- Memory Usage -->
            <div class="stat-card">
                <div class="stat-header">
                    <div class="stat-title">استخدام الذاكرة</div>
                    <div class="stat-icon memory">
                        <i class="fas fa-memory"></i>
                    </div>
                </div>
                <div class="stat-value" id="memoryUsage">--</div>
                <div class="progress-bar">
                    <div class="progress-fill" id="memoryProgress" style="width: 0%"></div>
                </div>
                <div class="stat-description" id="memoryDetails">-- / -- GB</div>
            </div>

            <!-- Disk Usage -->
            <div class="stat-card">
                <div class="stat-header">
                    <div class="stat-title">استخدام القرص</div>
                    <div class="stat-icon disk">
                        <i class="fas fa-hdd"></i>
                    </div>
                </div>
                <div class="stat-value" id="diskUsage">--</div>
                <div class="progress-bar">
                    <div class="progress-fill" id="diskProgress" style="width: 0%"></div>
                </div>
                <div class="stat-description" id="diskDetails">-- / -- GB</div>
            </div>

            <!-- Network -->
            <div class="stat-card">
                <div class="stat-header">
                    <div class="stat-title">الشبكة</div>
                    <div class="stat-icon network">
                        <i class="fas fa-network-wired"></i>
                    </div>
                </div>
                <div class="stat-value" id="networkConnections">--</div>
                <div class="stat-description">الاتصالات النشطة</div>
                <div style="margin-top: 10px;">
                    <small>الرفع: <span id="uploadSpeed">-- KB/s</span></small><br>
                    <small>التحميل: <span id="downloadSpeed">-- KB/s</span></small>
                </div>
            </div>

            <!-- Services Status -->
            <div class="stat-card">
                <div class="stat-header">
                    <div class="stat-title">حالة الخدمات</div>
                    <div class="stat-icon services">
                        <i class="fas fa-cogs"></i>
                    </div>
                </div>
                <ul class="services-list" id="servicesList">
                    <li class="service-item">
                        <span>Code Server</span>
                        <span class="service-status running">يعمل</span>
                    </li>
                    <li class="service-item">
                        <span>Nginx</span>
                        <span class="service-status running">يعمل</span>
                    </li>
                    <li class="service-item">
                        <span>Fail2ban</span>
                        <span class="service-status running">يعمل</span>
                    </li>
                    <li class="service-item">
                        <span>PostgreSQL</span>
                        <span class="service-status running">يعمل</span>
                    </li>
                </ul>
            </div>

            <!-- Security -->
            <div class="stat-card">
                <div class="stat-header">
                    <div class="stat-title">الأمان</div>
                    <div class="stat-icon security">
                        <i class="fas fa-shield-alt"></i>
                    </div>
                </div>
                <div class="stat-value" id="blockedIPs">--</div>
                <div class="stat-description">عناوين IP محظورة</div>
                <div style="margin-top: 15px;">
                    <div>SSL: <span class="service-status running">نشط</span></div>
                    <div>Firewall: <span class="service-status running">نشط</span></div>
                </div>
            </div>
        </div>

        <!-- Performance Chart -->
        <div class="chart-container">
            <h3><i class="fas fa-chart-line"></i> أداء النظام (آخر 24 ساعة)</h3>
            <div class="chart" id="performanceChart">
                <!-- Chart bars will be generated by JavaScript -->
            </div>
        </div>

        <!-- Logs Section -->
        <div class="logs-section">
            <div class="logs-header">
                <h3><i class="fas fa-file-alt"></i> سجلات النظام</h3>
                <button class="btn btn-primary" onclick="refreshLogs()">
                    <i class="fas fa-sync-alt"></i> تحديث
                </button>
            </div>
            <div class="logs-container" id="logsContainer">
                <div class="log-entry info">[2024-01-01 12:00:00] [INFO] Code Server started successfully</div>
                <div class="log-entry info">[2024-01-01 12:00:01] [INFO] Nginx proxy configured</div>
                <div class="log-entry warn">[2024-01-01 12:00:02] [WARN] High CPU usage detected</div>
                <div class="log-entry info">[2024-01-01 12:00:03] [INFO] Backup completed successfully</div>
            </div>
        </div>
    </div>

    <div class="footer">
        <p>&copy; 2024 Cursor Dev Platform - منصة التطوير المتكاملة</p>
    </div>

    <script>
        // Configuration
        const config = {
            refreshInterval: 10000, // 10 seconds
            serverEndpoint: '/api/status', // This would be your actual API endpoint
            maxLogEntries: 100
        };

        // Global variables
        let refreshTimer;
        let performanceData = [];

        // Initialize dashboard
        document.addEventListener('DOMContentLoaded', function() {
            initializeDashboard();
            startAutoRefresh();
            generatePerformanceChart();
        });

        function initializeDashboard() {
            console.log('🚀 Initializing Cursor Dev Platform Dashboard');
            
            // Simulate initial data load
            setTimeout(() => {
                updateSystemStats();
                updateServiceStatus();
                updateSecurityInfo();
            }, 1000);
        }

        function startAutoRefresh() {
            refreshTimer = setInterval(() => {
                refreshData();
            }, config.refreshInterval);
        }

        function refreshData() {
            console.log('🔄 Refreshing dashboard data...');
            
            // Show loading state
            showLoading();
            
            // Simulate API call
            setTimeout(() => {
                updateSystemStats();
                updateServiceStatus();
                updateSecurityInfo();
                updatePerformanceChart();
                hideLoading();
            }, 1500);
        }

        function updateSystemStats() {
            // Simulate real data
            const cpuUsage = Math.floor(Math.random() * 100);
            const memoryUsage = Math.floor(Math.random() * 100);
            const diskUsage = Math.floor(Math.random() * 100);
            const networkConnections = Math.floor(Math.random() * 50) + 10;

            // Update CPU
            document.getElementById('cpuUsage').textContent = cpuUsage + '%';
            document.getElementById('cpuProgress').style.width = cpuUsage + '%';

            // Update Memory
            document.getElementById('memoryUsage').textContent = memoryUsage + '%';
            document.getElementById('memoryProgress').style.width = memoryUsage + '%';
            document.getElementById('memoryDetails').textContent = `${(memoryUsage * 16 / 100).toFixed(1)} / 16.0 GB`;

            // Update Disk
            document.getElementById('diskUsage').textContent = diskUsage + '%';
            document.getElementById('diskProgress').style.width = diskUsage + '%';
            document.getElementById('diskDetails').textContent = `${(diskUsage * 500 / 100).toFixed(0)} / 500 GB`;

            // Update Network
            document.getElementById('networkConnections').textContent = networkConnections;
            document.getElementById('uploadSpeed').textContent = (Math.random() * 1000).toFixed(0) + ' KB/s';
            document.getElementById('downloadSpeed').textContent = (Math.random() * 5000).toFixed(0) + ' KB/s';

            // Store performance data
            performanceData.push({
                timestamp: new Date(),
                cpu: cpuUsage,
                memory: memoryUsage,
                disk: diskUsage
            });

            // Keep only last 24 hours of data
            if (performanceData.length > 144) { // 24 hours * 6 (10-minute intervals)
                performanceData.shift();
            }
        }

        function updateServiceStatus() {
            const services = ['code-server', 'nginx', 'fail2ban', 'postgresql'];
            const servicesList = document.getElementById('servicesList');
            
            servicesList.innerHTML = '';
            
            services.forEach(service => {
                const isRunning = Math.random() > 0.1; // 90% chance of running
                const serviceItem = document.createElement('li');
                serviceItem.className = 'service-item';
                serviceItem.innerHTML = `
                    <span>${service}</span>
                    <span class="service-status ${isRunning ? 'running' : 'stopped'}">
                        ${isRunning ? 'يعمل' : 'متوقف'}
                    </span>
                `;
                servicesList.appendChild(serviceItem);
            });
        }

        function updateSecurityInfo() {
            const blockedIPs = Math.floor(Math.random() * 20);
            document.getElementById('blockedIPs').textContent = blockedIPs;
        }

        function generatePerformanceChart() {
            const chart = document.getElementById('performanceChart');
            chart.innerHTML = '';

            // Generate 24 bars for 24 hours
            for (let i = 0; i < 24; i++) {
                const bar = document.createElement('div');
                bar.className = 'chart-bar';
                const height = Math.floor(Math.random() * 80) + 20;
                bar.style.height = height + '%';
                bar.title = `${i}:00 - CPU: ${height}%`;
                chart.appendChild(bar);
            }
        }

        function updatePerformanceChart() {
            generatePerformanceChart();
        }

        function refreshLogs() {
            const logsContainer = document.getElementById('logsContainer');
            const logTypes = ['info', 'warn', 'error'];
            const logMessages = [
                'Code Server process started',
                'User connected from IP',
                'Backup process completed',
                'High memory usage detected',
                'SSL certificate renewed',
                'Database connection established',
                'File system check completed',
                'Security scan finished'
            ];

            // Add new log entry
            const logEntry = document.createElement('div');
            const logType = logTypes[Math.floor(Math.random() * logTypes.length)];
            const message = logMessages[Math.floor(Math.random() * logMessages.length)];
            const timestamp = new Date().toLocaleString('ar-SA');
            
            logEntry.className = `log-entry ${logType}`;
            logEntry.textContent = `[${timestamp}] [${logType.toUpperCase()}] ${message}`;
            
            logsContainer.insertBefore(logEntry, logsContainer.firstChild);

            // Remove old entries
            while (logsContainer.children.length > config.maxLogEntries) {
                logsContainer.removeChild(logsContainer.lastChild);
            }

            // Scroll to top
            logsContainer.scrollTop = 0;
        }

        function startBackup() {
            if (confirm('هل تريد بدء عملية النسخ الاحتياطي؟')) {
                showAlert('تم بدء عملية النسخ الاحتياطي...', 'success');
                
                // Simulate backup process
                setTimeout(() => {
                    showAlert('تم إنشاء النسخة الاحتياطية بنجاح!', 'success');
                }, 3000);
            }
        }

        function restartServices() {
            if (confirm('هل تريد إعادة تشغيل جميع الخدمات؟')) {
                showAlert('جاري إعادة تشغيل الخدمات...', 'warning');
                
                // Simulate restart process
                setTimeout(() => {
                    showAlert('تم إعادة تشغيل جميع الخدمات بنجاح!', 'success');
                    updateServiceStatus();
                }, 5000);
            }
        }

        function openCodeServer() {
            // This would open the actual code-server URL
            const url = window.location.origin; // or your actual code-server URL
            window.open(url, '_blank');
        }

        function showLoading() {
            // Add loading indicators to stat values
            const statValues = document.querySelectorAll('.stat-value');
            statValues.forEach(element => {
                if (!element.querySelector('.loading')) {
                    const loading = document.createElement('div');
                    loading.className = 'loading';
                    loading.style.display = 'inline-block';
                    loading.style.marginLeft = '10px';
                    element.appendChild(loading);
                }
            });
        }

        function hideLoading() {
            // Remove loading indicators
            const loadingElements = document.querySelectorAll('.loading');
            loadingElements.forEach(element => {
                element.remove();
            });
        }

        function showAlert(message, type) {
            const alertDiv = document.createElement('div');
            alertDiv.className = `alert alert-${type}`;
            alertDiv.innerHTML = `
                <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'warning' ? 'exclamation-triangle' : 'times-circle'}"></i>
                ${message}
            `;

            document.querySelector('.container').insertBefore(alertDiv, document.querySelector('.controls'));

            // Remove alert after 5 seconds
            setTimeout(() => {
                alertDiv.remove();
            }, 5000);
        }

        // Handle connection status
        function updateConnectionStatus(isOnline) {
            const indicator = document.getElementById('connectionStatus');
            const text = document.getElementById('connectionText');
            
            if (isOnline) {
                indicator.className = 'status-indicator online';
                text.textContent = 'متصل';
            } else {
                indicator.className = 'status-indicator offline';
                text.textContent = 'غير متصل';
            }
        }

        // Simulate connection status updates
        setInterval(() => {
            const isOnline = Math.random() > 0.05; // 95% uptime
            updateConnectionStatus(isOnline);
        }, 30000);

        // Handle window visibility change
        document.addEventListener('visibilitychange', function() {
            if (document.hidden) {
                clearInterval(refreshTimer);
            } else {
                startAutoRefresh();
                refreshData();
            }
        });

        // Add keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey || e.metaKey) {
                switch(e.key) {
                    case 'r':
                        e.preventDefault();
                        refreshData();
                        break;
                    case 'b':
                        e.preventDefault();
                        startBackup();
                        break;
                    case 'o':
                        e.preventDefault();
                        openCodeServer();
                        break;
                }
            }
        });
    </script>
</body>
</html>
